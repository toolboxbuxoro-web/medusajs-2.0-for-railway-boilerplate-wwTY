import{r as t,dm as h,dl as se,df as oe,M as v,R as ne,Y as de,c1 as ce,dj as le,dk as ie,dg as ue,dG as pe,di as me,c0 as i,u as M,j as d,b as ve,dH as fe,w as ge,c as ye}from"./index-BpfPnGdZ.js";import{P as g}from"./prompt-CpsPiMDa.js";const x=e=>t.createElement(oe,{...e});x.displayName="FocusModal";const S=t.forwardRef((e,a)=>t.createElement(ue,{ref:a,...e}));S.displayName="FocusModal.Trigger";const N=h;N.displayName="FocusModal.Close";const b=e=>t.createElement(pe,{...e});b.displayName="FocusModal.Portal";const j=t.forwardRef(({className:e,...a},s)=>t.createElement(me,{ref:s,className:v("bg-ui-bg-overlay fixed inset-0","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));j.displayName="FocusModal.Overlay";const C=t.forwardRef(({className:e,overlayProps:a,portalProps:s,...r},o)=>t.createElement(b,{...s},t.createElement(j,{...a}),t.createElement(le,{ref:o,className:v("bg-ui-bg-base shadow-elevation-modal fixed inset-2 flex flex-col overflow-hidden rounded-lg border outline-none","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=open]:slide-in-from-bottom-0 data-[state=closed]:slide-in-from-bottom-2  duration-200",e),...r})));C.displayName="FocusModal.Content";const D=t.forwardRef(({children:e,className:a,...s},r)=>t.createElement("div",{ref:r,className:v("border-ui-border-base flex items-center justify-between gap-x-4 border-b px-4 py-2",a),...s},t.createElement("div",{className:"flex items-center gap-x-2"},t.createElement(h,{asChild:!0},t.createElement(ne,{size:"small",type:"button",variant:"transparent"},t.createElement(de,null))),t.createElement(ce,null,"esc")),e));D.displayName="FocusModal.Header";const w=t.forwardRef(({children:e,className:a,...s},r)=>t.createElement("div",{ref:r,className:v("border-ui-border-base flex items-center justify-end gap-x-2 border-t p-4",a),...s},e));w.displayName="FocusModal.Footer";const T=t.forwardRef(({className:e,...a},s)=>t.createElement(ie,{ref:s,...a}));T.displayName="FocusModal.Title";const E=se;E.displayName="FocusModal.Description";const O=t.forwardRef(({className:e,...a},s)=>t.createElement("div",{ref:s,className:v("flex-1",e),...a}));O.displayName="FocusModal.Body";const u=Object.assign(x,{Trigger:S,Title:T,Description:E,Content:C,Header:D,Body:O,Close:N,Footer:w});var k=e=>{const a=ye();return t.useMemo(()=>{var o;const r=(o=a.state)==null?void 0:o.restore_params;return r?`${e}?${r.toString()}`:e},[a.state,e])},R=({form:e,blockSearchParams:a=!1,children:s,onClose:r})=>{const{t:o}=ve(),{formState:{isDirty:p}}=e,n=fe(({currentLocation:c,nextLocation:f})=>{const{isSubmitSuccessful:F}=f.state||{};if(F)return r==null||r(!0),!1;const y=c.pathname!==f.pathname,te=c.search!==f.search;if(a){const re=p&&(y||te);return y&&(r==null||r(F)),re}const ae=p&&y;return y&&(r==null||r(F)),ae}),m=()=>{var c;(c=n==null?void 0:n.reset)==null||c.call(n)},l=()=>{var c;(c=n==null?void 0:n.proceed)==null||c.call(n),r==null||r(!1)};return d.jsxs(ge,{...e,children:[s,d.jsx(g,{open:n.state==="blocked",variant:"confirmation",children:d.jsxs(g.Content,{children:[d.jsxs(g.Header,{children:[d.jsx(g.Title,{children:o("general.unsavedChangesTitle")}),d.jsx(g.Description,{children:o("general.unsavedChangesDescription")})]}),d.jsxs(g.Footer,{children:[d.jsx(g.Cancel,{onClick:m,type:"button",children:o("actions.cancel")}),d.jsx(g.Action,{onClick:l,type:"button",children:o("actions.continue")})]})]})})]})},B=t.createContext(null),H=({prev:e,children:a})=>{const s=M(),[r,o]=t.useState(!0),p=t.useCallback(m=>{s(m||e,{replace:!0,state:{isSubmitSuccessful:!0}})},[s,e]),n=t.useMemo(()=>({handleSuccess:p,setCloseOnEscape:o,__internal:{closeOnEscape:r}}),[p,o,r]);return d.jsx(B.Provider,{value:n,children:a})},P=t.createContext(null),$=({children:e,onOpenChange:a})=>{const[s,r]=t.useState({}),o=l=>s[l]||!1,p=(l,c)=>{r(f=>({...f,[l]:c})),a(c)},n=l=>{r(c=>({...c,[l]:!1}))},m=l=>{r(c=>{const f={...c};return delete f[l],f})};return d.jsx(P.Provider,{value:{getIsOpen:o,setIsOpen:p,register:n,unregister:m},children:e})},I=()=>{const e=t.useContext(P);if(!e)throw new Error("useStackedModal must be used within a StackedModalProvider");return e},Fe=({prev:e="..",children:a})=>{const s=M(),[r,o]=t.useState(!1),[p,n]=t.useState(!1),m=k(e);t.useEffect(()=>(o(!0),()=>{o(!1),n(!1)}),[]);const l=c=>{if(!c){document.body.style.pointerEvents="auto",s(m,{replace:!0});return}o(c)};return d.jsx(i,{open:r,onOpenChange:l,children:d.jsx(H,{prev:m,children:d.jsx($,{onOpenChange:n,children:d.jsx(i.Content,{"aria-describedby":void 0,className:v({"!bg-ui-bg-disabled !inset-y-5 !right-5":p}),children:a})})})})},Me=i.Header,he=i.Title,xe=i.Description,Se=i.Body,Ne=i.Footer,be=i.Close,je=R,Ae=Object.assign(Fe,{Header:Me,Title:he,Body:Se,Description:xe,Footer:Ne,Close:be,Form:je}),Ce=()=>{const e=t.useContext(B);if(!e)throw new Error("useRouteModal must be used within a RouteModalProvider");return e},De=({prev:e="..",children:a})=>{const s=M(),[r,o]=t.useState(!1),[p,n]=t.useState(!1),m=k(e);t.useEffect(()=>(o(!0),()=>{o(!1),n(!1)}),[]);const l=c=>{if(!c){document.body.style.pointerEvents="auto",s(m,{replace:!0});return}o(c)};return d.jsx(u,{open:r,onOpenChange:l,children:d.jsx(H,{prev:m,children:d.jsx($,{onOpenChange:n,children:d.jsx(we,{stackedModalOpen:p,children:a})})})})},we=({stackedModalOpen:e,children:a})=>{const{__internal:s}=Ce(),r=!s.closeOnEscape;return d.jsx(u.Content,{onEscapeKeyDown:r?o=>{o.preventDefault()}:void 0,className:v({"!bg-ui-bg-disabled !inset-x-5 !inset-y-3":e}),children:a})},Te=u.Header,Ee=u.Title,Oe=u.Description,ke=u.Footer,Re=u.Body,Be=u.Close,He=R,Ke=Object.assign(De,{Header:Te,Title:Ee,Body:Re,Description:Oe,Footer:ke,Close:Be,Form:He}),Pe=({id:e,children:a})=>{const{register:s,unregister:r,getIsOpen:o,setIsOpen:p}=I();return t.useEffect(()=>(s(e),()=>r(e)),[]),d.jsx(i,{open:o(e),onOpenChange:n=>p(e,n),children:a})},_=i.Close;_.displayName="StackedDrawer.Close";var A=i.Header;A.displayName="StackedDrawer.Header";var K=i.Body;K.displayName="StackedDrawer.Body";var z=i.Trigger;z.displayName="StackedDrawer.Trigger";var G=i.Footer;G.displayName="StackedDrawer.Footer";var X=i.Title;X.displayName="StackedDrawer.Title";var Y=i.Description;Y.displayName="StackedDrawer.Description";var q=t.forwardRef(({className:e,...a},s)=>d.jsx(i.Content,{ref:s,className:v(e),overlayProps:{className:"bg-transparent"},...a}));q.displayName="StackedDrawer.Content";var ze=Object.assign(Pe,{Close:_,Header:A,Body:K,Content:q,Trigger:z,Footer:G,Description:Y,Title:X}),$e=({id:e,onOpenChangeCallback:a,children:s})=>{const{register:r,unregister:o,getIsOpen:p,setIsOpen:n}=I();t.useEffect(()=>(r(e),()=>o(e)),[]);const m=l=>{n(e,l),a==null||a(l)};return d.jsx(u,{open:p(e),onOpenChange:m,children:s})},J=u.Close;J.displayName="StackedFocusModal.Close";var Q=u.Header;Q.displayName="StackedFocusModal.Header";var U=u.Body;U.displayName="StackedFocusModal.Body";var V=u.Trigger;V.displayName="StackedFocusModal.Trigger";var W=u.Footer;W.displayName="StackedFocusModal.Footer";var Z=u.Title;Z.displayName="StackedFocusModal.Title";var L=u.Description;L.displayName="StackedFocusModal.Description";var ee=t.forwardRef(({className:e,...a},s)=>d.jsx(u.Content,{ref:s,className:v("!top-6",e),overlayProps:{className:"bg-transparent"},...a}));ee.displayName="StackedFocusModal.Content";var Ge=Object.assign($e,{Close:J,Header:Q,Body:U,Content:ee,Trigger:V,Footer:W,Description:L,Title:Z});export{Ke as R,Ge as S,I as a,Ae as b,ze as c,Ce as u};
