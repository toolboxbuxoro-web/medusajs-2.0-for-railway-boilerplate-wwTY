import{r as t,M as V,a7 as Ze,bh as H,bf as A,R as ze,Y as Yt,I as He,c4 as ot,ay as Xe,N as Ge,b$ as Xt,b4 as ie,b5 as Gt,b6 as Jt,dn as Zt,dp as Qt,dq as Ut,dr as en,ds as ct,dt as tn,du as nn,dv as an,_ as Be,dw as ln,dx as sn,y as rn,z as nt,K as on,P as cn,E as un,b1 as dn,bN as Ie,U as Me,bI as mn,bL as fn,dy as gn,f as it,b as ut,bc as dt,ae as bn,u as pn,j as E,H as mt,A as vn,a9 as at,ax as xn,t as Te,B as Le,L as hn,dz as wn,dA as En,dB as yn,dC as Cn,dD as Sn,dE as Dn,al as Nn,c0 as re,dF as kn}from"./index-BpfPnGdZ.js";import{C as ye}from"./checkbox-DCa7E6TW.js";import{u as Tn}from"./chunk-C76H5USB-Dd196HiU.js";import{C as Ee}from"./command-bar-CZwuJqwH.js";import{A as _n}from"./adjustments-CM1kR1Ir.js";import{S as Ne}from"./select-BWHoKjkd.js";import{X as ft}from"./x-mark-mini-hOCHhWa9.js";import{D as lt}from"./date-picker-BXzAAwZh.js";import{P as Ae}from"./popover-Dgs2umtn.js";import{D as Fn,T as W}from"./table-DW79ophy.js";import{A as In,a as An}from"./arrow-up-mini-ywWVFkNt.js";import{u as Rn}from"./use-prompt-Cv7F2RTx.js";import{P as jn}from"./pencil-square-B6or-DO4.js";import{T as Pn}from"./trash-CDEOtOav.js";var Mn=Object.defineProperty,Oe=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,st=(n,e,a)=>e in n?Mn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,Ln=(n,e)=>{for(var a in e||(e={}))gt.call(e,a)&&st(n,a,e[a]);if(Oe)for(var a of Oe(e))bt.call(e,a)&&st(n,a,e[a]);return n},On=(n,e)=>{var a={};for(var l in n)gt.call(n,l)&&e.indexOf(l)<0&&(a[l]=n[l]);if(n!=null&&Oe)for(var l of Oe(n))e.indexOf(l)<0&&bt.call(n,l)&&(a[l]=n[l]);return a};const pt=t.forwardRef((n,e)=>{var a=n,{color:l="currentColor"}=a,s=On(a,["color"]);return t.createElement("svg",Ln({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:e},s),t.createElement("path",{stroke:l,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m8.833 12.611-2.666 1.333V7.5L1.944 1.944h11.112L8.833 7.5z"}))});pt.displayName="Funnel";function G({className:n,...e}){return t.createElement("div",{className:V("bg-ui-bg-component animate-pulse rounded-md",n),...e})}const vt=t.createContext(null),q=()=>{const n=t.useContext(vt);if(!n)throw new Error("useDataTableContext must be used within a DataTableContextProvider");return n},xt=n=>{const{instance:e}=q(),a=e.getCommands(),l=e.getRowSelection(),s=Object.keys(l||[]).length,c=a&&a.length>0&&s>0;function r(d){return typeof n.selectedLabel=="function"?n.selectedLabel(d):n.selectedLabel}return!a||a.length===0?null:t.createElement(Ee,{open:c},t.createElement(Ee.Bar,null,n.selectedLabel&&t.createElement(t.Fragment,null,t.createElement(Ee.Value,null,r(s)),t.createElement(Ee.Seperator,null)),a.map((d,m)=>t.createElement(t.Fragment,{key:m},t.createElement(Ee.Command,{key:d.label,action:()=>d.action(l),label:d.label,shortcut:d.shortcut}),m<a.length-1&&t.createElement(Ee.Seperator,null)))))};xt.displayName="DataTable.CommandBar";const ht=({className:n,tooltip:e})=>{const{instance:a,enableColumnVisibility:l}=q();if(!l)return null;const s=a.getAllColumns().filter(i=>i.getCanHide()),c=i=>{i.toggleVisibility()},r=i=>{a.setColumnVisibility(Object.fromEntries(s.map(v=>[v.id,i])))},d=s.every(i=>i.getIsVisible()),m=s.some(i=>i.getIsVisible()),u=e?Ze:H.Fragment,o=e?{content:e}:{};return H.createElement(A,null,H.createElement(u,{...o},H.createElement(A.Trigger,{asChild:!0},H.createElement(ze,{size:"small",className:n},H.createElement(_n,null)))),H.createElement(A.Content,{align:"end",className:"min-w-[200px] max-h-[400px] overflow-hidden"},H.createElement(A.Label,null,"Toggle columns"),H.createElement(A.Separator,null),H.createElement(A.Item,{onSelect:i=>{i.preventDefault(),r(!d)}},H.createElement("div",{className:"flex items-center gap-x-2"},H.createElement(ye,{checked:d?!0:m&&!d?"indeterminate":!1}),H.createElement("span",null,"Toggle all"))),H.createElement(A.Separator,null),H.createElement("div",{className:"max-h-[250px] overflow-y-auto"},s.map(i=>{var v;return H.createElement(A.Item,{key:i.id,onSelect:h=>{h.preventDefault(),c(i)}},H.createElement("div",{className:"flex items-center gap-x-2"},H.createElement(ye,{checked:i.getIsVisible()}),H.createElement("span",{className:"truncate"},((v=i.columnDef.meta)===null||v===void 0?void 0:v.name)||i.id)))}))))};function Re(n){if(typeof n!="object"||n===null)return!1;const e=["$gte","$lte","$gt","$lt"],a=e.some(s=>s in n),l=Object.entries(n).every(([s,c])=>e.includes(s)&&(typeof c=="string"||c===void 0));return a&&l}const $n=n=>n.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),Vn="Custom",wt="Starting",Et="Ending",yt=({id:n,filter:e,isNew:a=!1,onUpdate:l,onRemove:s})=>{const{instance:c}=q(),[r,d]=t.useState(a),[m,u]=t.useState(!1),o=c.getFilterMeta(n);if(!o)return null;const{type:i,label:v,...h}=o,y=o.options,b=t.useMemo(()=>{if(e==null||typeof e=="string"&&e===""||Array.isArray(e)&&e.length===0)return!1;if(typeof e=="number")return!0;if(Re(e))return!!(e.$gte||e.$lte||e.$gt||e.$lt);if(typeof e=="object"&&e!==null){const g=Object.keys(e);return g.length>0&&e[g[0]]!==null&&e[g[0]]!==void 0}return!0},[e]),f=t.useCallback(g=>{d(g),!g&&r&&u(!0),!g&&!b&&(a&&!m||!a)&&(s?s():c.removeFilter(n))},[c,n,r,m,a,b,s]),x=t.useCallback(()=>{s?s():c.removeFilter(n)},[c,n,s]),{displayValue:p,isCustomRange:w}=t.useMemo(()=>{var g,C,D,T,I;let _=null,P=!1;if(typeof e=="string"&&(!y||y.length===0?_=e:_=(C=(g=y==null?void 0:y.find(k=>k.value===e))===null||g===void 0?void 0:g.label)!==null&&C!==void 0?C:null),typeof e=="number"&&(_=String(e)),Array.isArray(e)&&(_=(D=e.map(k=>{var O;return(O=y==null?void 0:y.find(S=>S.value===k))===null||O===void 0?void 0:O.label}).join(", "))!==null&&D!==void 0?D:null),Re(e)&&(_=(I=(T=y==null?void 0:y.find(k=>Re(k.value)?(e.$gte===k.value.$gte||!e.$gte&&!k.value.$gte)&&(e.$lte===k.value.$lte||!e.$lte&&!k.value.$lte)&&(e.$gt===k.value.$gt||!e.$gt&&!k.value.$gt)&&(e.$lt===k.value.$lt||!e.$lt&&!k.value.$lt):!1))===null||T===void 0?void 0:T.label)!==null&&I!==void 0?I:null,!_&&Kn(o))){P=!0;const k=o.formatDateValue?o.formatDateValue:$n;e.$gte&&!e.$lte&&(_=`${o.rangeOptionStartLabel||wt} ${k(new Date(e.$gte))}`),e.$lte&&!e.$gte&&(_=`${o.rangeOptionEndLabel||Et} ${k(new Date(e.$lte))}`),e.$gte&&e.$lte&&(_=`${k(new Date(e.$gte))} - ${k(new Date(e.$lte))}`)}if(typeof e=="object"&&e!==null&&!Array.isArray(e)&&!Re(e)){const k={$eq:"=",$gt:">",$gte:"≥",$lt:"<",$lte:"≤"},O=Object.keys(e)[0],S=k[O]||O,j=e[O];typeof j=="number"&&(_=`${S} ${j}`)}return{displayValue:_,isCustomRange:P}},[e,y,o]);return t.createElement(Ae,{open:r,onOpenChange:f,modal:!0},t.createElement("div",{className:V("bg-ui-bg-field flex flex-shrink-0 items-stretch overflow-hidden rounded-md","txt-compact-small-plus shadow-borders-base")},!b&&a&&t.createElement(Ae.Anchor,null),t.createElement("div",{className:V("flex items-center px-2 py-1 text-ui-fg-muted",{"border-r":b})},v||n),b&&t.createElement(t.Fragment,null,(i==="select"||i==="multiselect"||i==="radio")&&t.createElement("div",{className:"flex items-center border-r px-2 py-1 text-ui-fg-muted"},"is"),t.createElement(Ae.Trigger,{asChild:!0},t.createElement("button",{className:V("flex flex-1 items-center px-2 py-1 outline-none","hover:bg-ui-bg-base-hover active:bg-ui-bg-base-pressed transition-fg",{"text-ui-fg-subtle":p,"text-ui-fg-muted":!p,"min-w-[80px] justify-center":!p,"border-r":!0})},p||" ")),t.createElement("button",{type:"button",className:"flex size-7 items-center justify-center text-ui-fg-muted outline-none hover:bg-ui-bg-base-hover active:bg-ui-bg-base-pressed transition-fg",onClick:x},t.createElement(Yt,null)))),t.createElement(Ae.Content,{align:"start",sideOffset:8,collisionPadding:16,hideWhenDetached:!0,className:"bg-ui-bg-component p-0 outline-none",onOpenAutoFocus:g=>{if(a){const C=g.currentTarget;if(C){const D=C.querySelector('input:not([type="hidden"]), [role="list"][tabindex="0"]');D==null||D.focus()}}},onCloseAutoFocus:g=>{g.preventDefault()},onInteractOutside:g=>{g.target.closest('[role="menuitem"]')&&g.preventDefault()}},(()=>{switch(i){case"select":return t.createElement(Hn,{id:n,filter:e,options:y,isNew:a,onUpdate:l});case"radio":return t.createElement(Bn,{id:n,filter:e,options:y,onUpdate:l});case"date":const g=h;return t.createElement(zn,{id:n,filter:e,options:y,isCustomRange:w,format:g.format,rangeOptionLabel:g.rangeOptionLabel,disableRangeOption:g.disableRangeOption,rangeOptionStartLabel:g.rangeOptionStartLabel,rangeOptionEndLabel:g.rangeOptionEndLabel,onUpdate:l});case"multiselect":const C=h;return t.createElement(qn,{id:n,filter:e,options:y,searchable:C.searchable,onUpdate:l});case"string":const D=h;return t.createElement(Wn,{id:n,filter:e,placeholder:D.placeholder,onUpdate:l});case"number":const T=h;return t.createElement(Yn,{id:n,filter:e,placeholder:T.placeholder,includeOperators:T.includeOperators,onUpdate:l});case"custom":const I=h;return t.createElement(Xn,{id:n,filter:e,onRemove:x,render:I.render,onUpdate:l});default:return null}})()))};yt.displayName="DataTable.Filter";const zn=({id:n,filter:e,options:a,format:l="date",rangeOptionLabel:s=Vn,rangeOptionStartLabel:c=wt,rangeOptionEndLabel:r=Et,disableRangeOption:d=!1,isCustomRange:m,onUpdate:u})=>{const o=e,{instance:i}=q(),[v,h]=t.useState(m);t.useEffect(()=>{h(m)},[m]);const y=t.useMemo(()=>{if(!(!o||v))return JSON.stringify(o)},[o,v]),b=t.useCallback(_=>{h(!1);const P=JSON.parse(_);u?u(P):i.updateFilter({id:n,value:P})},[i,n,u]),f=t.useCallback(()=>{h(!0)},[]),x=t.useCallback((_,P)=>{const k={...o};k[_]=P?P.toISOString():void 0,u?u(k):i.updateFilter({id:n,value:k})},[i,n,o,u]),{focusedIndex:p,setFocusedIndex:w}=Ct(a,_=>{_===a.length&&!d?f():b(JSON.stringify(a[_].value))},d?0:1),g=l==="date-time"?"minute":"day",C=o!=null&&o.$lte?g==="minute"?new Date(o.$lte):new Date(new Date(o.$lte).setHours(23,59,59,999)):void 0,D=o!=null&&o.$gte?g==="minute"?new Date(o.$gte):new Date(new Date(o.$gte).setHours(0,0,0,0)):void 0,T=v?a.length:0,I=t.useCallback(()=>{p===-1&&w(T)},[p,T]);return t.createElement(t.Fragment,null,t.createElement("div",{className:"flex flex-col p-1 outline-none",tabIndex:0,role:"list",onFocus:I,autoFocus:!0},a.map((_,P)=>{const k=JSON.stringify(_.value),O=y===k;return t.createElement(Je,{key:P,index:P,option:_,isSelected:O,isFocused:p===P,onClick:()=>b(k),onMouseEvent:w,icon:Xe})}),!d&&t.createElement(Je,{index:a.length,option:{label:s,value:"__custom"},icon:Xe,isSelected:v,isFocused:p===a.length,onClick:f,onMouseEvent:w})),!d&&v&&t.createElement(t.Fragment,null,t.createElement("div",{className:"flex flex-col py-[3px]"},t.createElement("div",{className:"bg-ui-border-menu-top h-px w-full"}),t.createElement("div",{className:"bg-ui-border-menu-bot h-px w-full"})),t.createElement("div",{className:"flex flex-col gap-2 px-2 pb-3 pt-1"},t.createElement("div",{className:"flex flex-col gap-1"},t.createElement(Ge,{id:"custom-start-date-label",size:"xsmall",weight:"plus"},c),t.createElement(lt,{"aria-labelledby":"custom-start-date-label",granularity:g,maxValue:C,value:o!=null&&o.$gte?new Date(o.$gte):null,onChange:_=>x("$gte",_)})),t.createElement("div",{className:"flex flex-col gap-1"},t.createElement(Ge,{id:"custom-end-date-label",size:"xsmall",weight:"plus"},r),t.createElement(lt,{"aria-labelledby":"custom-end-date-label",granularity:g,minValue:D,value:o!=null&&o.$lte?new Date(o.$lte):null,onChange:_=>x("$lte",_)})))))},Hn=({id:n,filter:e=[],options:a,isNew:l=!1,onUpdate:s})=>{const{instance:c}=q(),[r,d]=t.useState(""),m=t.useMemo(()=>{if(!r)return a;const o=r.toLowerCase();return a.filter(i=>i.label.toLowerCase().includes(o))},[a,r]),u=t.useCallback(o=>{if(e!=null&&e.includes(o)){const i=e==null?void 0:e.filter(h=>h!==o),v=i.length>0?i:void 0;s?s(v):c.updateFilter({id:n,value:v})}else{const i=[...e??[],o];s?s(i):c.updateFilter({id:n,value:i})}},[c,n,e,s]);return t.createElement("div",{className:"w-[250px]"},t.createElement("div",{className:"flex items-center gap-x-2 border-b px-3 py-1.5"},t.createElement(ot,{className:"h-4 w-4 text-ui-fg-muted"}),t.createElement("input",{value:r,onChange:o=>d(o.target.value),placeholder:"Search...",className:"h-8 flex-1 bg-transparent text-sm outline-none placeholder:text-ui-fg-muted",autoFocus:!0}),r&&t.createElement("button",{onClick:()=>d(""),className:"text-ui-fg-muted hover:text-ui-fg-subtle"},t.createElement(ft,{className:"h-4 w-4"}))),t.createElement("div",{className:"max-h-[300px] overflow-auto p-1"},m.length===0&&t.createElement("div",{className:"py-6 text-center text-sm text-ui-fg-muted"},"No results found"),m.map(o=>{const i=e==null?void 0:e.includes(o.value);return t.createElement("button",{key:String(o.value),onClick:()=>u(o.value),className:V("flex w-full cursor-pointer items-center gap-x-2 rounded-md px-2 py-1.5 text-sm text-left","hover:bg-ui-bg-base-hover")},t.createElement("div",{className:"flex size-[15px] items-center justify-center"},i&&t.createElement(Xt,null)),t.createElement("span",null,o.label))})))},Bn=({id:n,filter:e,options:a,onUpdate:l})=>{const{instance:s}=q(),c=t.useCallback(u=>{l?l(u):s.updateFilter({id:n,value:u})},[s,n,l]),{focusedIndex:r,setFocusedIndex:d}=Ct(a,u=>c(a[u].value)),m=t.useCallback(()=>{r===-1&&d(0)},[r]);return t.createElement("div",{className:"flex flex-col p-1 outline-none",role:"list",tabIndex:0,onFocus:m,autoFocus:!0},a.map((u,o)=>{const i=e===u.value;return t.createElement(Je,{key:o,index:o,option:u,isSelected:i,isFocused:r===o,onClick:()=>c(u.value),onMouseEvent:d,icon:Xe})}))};function Kn(n){return n?n.type==="date":!1}const Je=t.memo(({index:n,option:e,isSelected:a,isFocused:l,onClick:s,onMouseEvent:c,icon:r})=>t.createElement("button",{type:"button",role:"listitem",className:V("bg-ui-bg-component txt-compact-small transition-fg flex items-center gap-2 rounded px-2 py-1 outline-none",{"bg-ui-bg-component-hover":l}),onClick:s,onMouseEnter:()=>c(n),onMouseLeave:()=>c(-1),tabIndex:-1},t.createElement("div",{className:"flex size-[15px] items-center justify-center"},a&&t.createElement(r,null)),t.createElement("span",null,e.label)));function Ct(n,e,a=0){const[l,s]=t.useState(-1),c=t.useCallback(r=>{const d=n.length+a;if(document.activeElement.contentEditable!=="true")switch(r.key){case"ArrowDown":r.preventDefault(),s(m=>m<d-1?m+1:m);break;case"ArrowUp":r.preventDefault(),s(m=>m>0?m-1:m);break;case" ":case"Enter":r.preventDefault(),l>=0&&e(l);break}},[n.length,a,l,e]);return t.useEffect(()=>(window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}),[c]),{focusedIndex:l,setFocusedIndex:s}}const qn=({id:n,filter:e=[],options:a,searchable:l=!0,onUpdate:s})=>{const{instance:c}=q(),[r,d]=t.useState(""),m=t.useMemo(()=>{if(!l||!r)return a;const o=r.toLowerCase();return a.filter(i=>i.label.toLowerCase().includes(o))},[a,r,l]),u=t.useCallback(o=>{if(e!=null&&e.includes(o)){const i=e==null?void 0:e.filter(h=>h!==o),v=i.length>0?i:void 0;s?s(v):c.updateFilter({id:n,value:v})}else{const i=[...e??[],o];s?s(i):c.updateFilter({id:n,value:i})}},[c,n,e,s]);return l?t.createElement("div",{className:"w-[250px]"},t.createElement("div",{className:"flex items-center gap-x-2 border-b px-3 py-1.5"},t.createElement(ot,{className:"h-4 w-4 text-ui-fg-muted"}),t.createElement("input",{value:r,onChange:o=>d(o.target.value),placeholder:"Search...",className:"h-8 flex-1 bg-transparent text-sm outline-none placeholder:text-ui-fg-muted",autoFocus:!0}),r&&t.createElement("button",{onClick:()=>d(""),className:"text-ui-fg-muted hover:text-ui-fg-subtle"},t.createElement(ft,{className:"h-4 w-4"}))),t.createElement("div",{className:"max-h-[300px] overflow-auto p-1"},m.length===0&&t.createElement("div",{className:"py-6 text-center text-sm text-ui-fg-muted"},"No results found"),m.map(o=>{const i=e==null?void 0:e.includes(o.value);return t.createElement("button",{key:String(o.value),onClick:()=>u(o.value),className:V("flex w-full cursor-pointer items-center gap-x-2 rounded-md px-2 py-1.5 text-sm text-left","hover:bg-ui-bg-base-hover")},t.createElement(ye,{checked:i,className:"pointer-events-none"}),t.createElement("span",null,o.label))}))):t.createElement("div",{className:"w-[250px]"},t.createElement("div",{className:"max-h-[300px] overflow-auto p-1"},a.map(o=>{const i=e==null?void 0:e.includes(o.value);return t.createElement("button",{key:String(o.value),onClick:()=>u(o.value),className:V("flex w-full items-center gap-x-2 rounded-md px-2 py-1.5 text-sm","hover:bg-ui-bg-base-hover cursor-pointer text-left")},t.createElement(ye,{checked:i,className:"pointer-events-none"}),t.createElement("span",null,o.label))})))},Wn=({id:n,filter:e,placeholder:a="Enter value...",onUpdate:l})=>{const{instance:s}=q(),[c,r]=t.useState(e||""),d=t.useRef(null),m=t.useCallback(o=>{r(o),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{const i=o.trim()||void 0;l?l(i):s.updateFilter({id:n,value:i})},500)},[s,n,l]);t.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]);const u=t.useCallback(o=>{if(o.key==="Enter"){d.current&&clearTimeout(d.current);const i=c.trim()||void 0;l?l(i):s.updateFilter({id:n,value:i})}},[s,n,c,l]);return t.createElement("div",{className:"p-3 w-[250px]"},t.createElement(He,{placeholder:a,value:c,onChange:o=>m(o.target.value),onKeyDown:u,autoFocus:!0}))},Yn=({id:n,filter:e,placeholder:a="Enter number...",includeOperators:l=!0,onUpdate:s})=>{const{instance:c}=q(),[r,d]=t.useState("eq"),[m,u]=t.useState(""),o=t.useRef(null);t.useEffect(()=>{if(e){if(typeof e=="number")d("eq"),u(String(e));else if(typeof e=="object"){const b=Object.keys(e)[0];d(b.replace("$","")),u(String(e[b]))}}},[e]);const i=t.useCallback(b=>{u(b),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{const f=parseFloat(b);if(isNaN(f))b===""&&(s?s(void 0):c.updateFilter({id:n,value:void 0}));else{const x=l&&r!=="eq"?{[`$${r}`]:f}:f;s?s(x):c.updateFilter({id:n,value:x})}},500)},[c,n,r,l,s]),v=t.useCallback(b=>{d(b);const f=parseFloat(m);if(!isNaN(f)){const x=l&&b!=="eq"?{[`$${b}`]:f}:f;s?s(x):c.updateFilter({id:n,value:x})}},[c,n,m,l,s]);t.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[]);const h=t.useCallback(b=>{if(b.key==="Enter"){o.current&&clearTimeout(o.current);const f=parseFloat(m);if(!isNaN(f)){const x=l&&r!=="eq"?{[`$${r}`]:f}:f;s?s(x):c.updateFilter({id:n,value:x})}}},[c,n,m,r,l,s]),y=[{value:"eq",label:"Equals"},{value:"gt",label:"Greater than"},{value:"gte",label:"Greater than or equal"},{value:"lt",label:"Less than"},{value:"lte",label:"Less than or equal"}];return t.createElement("div",{className:"p-3 space-y-3 w-[250px]"},l&&t.createElement(Ne,{value:r,onValueChange:v},t.createElement(Ne.Trigger,null,t.createElement(Ne.Value,null)),t.createElement(Ne.Content,null,y.map(b=>t.createElement(Ne.Item,{key:b.value,value:b.value},b.label)))),t.createElement(He,{type:"number",placeholder:a,value:m,onChange:b=>i(b.target.value),onKeyDown:h,autoFocus:!l}))},Xn=({id:n,filter:e,onRemove:a,render:l,onUpdate:s})=>{const{instance:c}=q(),r=t.useCallback(d=>{s?s(d):c.updateFilter({id:n,value:d})},[c,n,s]);return t.createElement(t.Fragment,null,l({value:e,onChange:r,onRemove:a}))},Qe=({tooltip:n,onAddFilter:e})=>{const{instance:a}=q(),l=Object.keys(a.getFiltering()),s=a.getFilters().filter(d=>!l.includes(d.id));if(!l.length&&!s.length)throw new Error("DataTable.FilterMenu was rendered but there are no filters to apply. Make sure to pass filters to 'useDataTable'");const c=n?Ze:t.Fragment,r=n?{content:n,hidden:s.length===0}:{};return a.showSkeleton?t.createElement(Gn,null):t.createElement(A,null,t.createElement(c,{...r},t.createElement(A.Trigger,{asChild:!0,disabled:s.length===0},t.createElement(ze,{size:"small"},t.createElement(pt,null)))),t.createElement(A.Content,{side:"bottom",align:"start"},s.map(d=>{const m=()=>{switch(d.type){case"select":case"multiselect":return[];case"string":return"";case"number":return null;case"date":return null;case"radio":return null;case"custom":return null;default:return null}};return t.createElement(A.Item,{key:d.id,onClick:u=>{u.stopPropagation(),e?e(d.id,m()):a.addFilter({id:d.id,value:m()})}},d.label)})))};Qe.displayName="DataTable.FilterMenu";const Gn=()=>t.createElement(G,{className:"size-7"}),Ue=n=>{const{instance:e}=q(),a=e.getAllColumns().filter(u=>u.getCanSort()),l=e.getSorting(),s=t.useMemo(()=>a.find(u=>u.id===(l==null?void 0:l.id)),[a,l]),c=t.useCallback(u=>{e.setSorting(o=>{var i;return{id:u,desc:(i=o==null?void 0:o.desc)!==null&&i!==void 0?i:!1}})},[e]),r=t.useCallback(u=>{e.setSorting(o=>{var i;return{id:(i=o==null?void 0:o.id)!==null&&i!==void 0?i:"",desc:u==="true"}})},[e]);if(!e.enableSorting)throw new Error("DataTable.SortingMenu was rendered but sorting is not enabled. Make sure to pass sorting to 'useDataTable'");if(!a.length)throw new Error("DataTable.SortingMenu was rendered but there are no sortable columns. Make sure to set `enableSorting` to true on at least one column.");if(e.showSkeleton)return t.createElement(Zn,null);const d=n.tooltip?Ze:t.Fragment,m=n.tooltip?{content:n.tooltip}:{};return t.createElement(A,null,t.createElement(d,{...m},t.createElement(A.Trigger,{asChild:!0},t.createElement(ze,{size:"small"},t.createElement(Fn,null)))),t.createElement(A.Content,{side:"bottom"},t.createElement(A.RadioGroup,{value:l==null?void 0:l.id,onValueChange:c},a.map(u=>t.createElement(A.RadioItem,{onSelect:o=>o.preventDefault(),value:u.id,key:u.id},Jn(u)))),l&&t.createElement(t.Fragment,null,t.createElement(A.Separator,null),t.createElement(A.RadioGroup,{value:l!=null&&l.desc?"true":"false",onValueChange:r},t.createElement(A.RadioItem,{onSelect:u=>u.preventDefault(),value:"false",className:"flex items-center gap-2"},t.createElement(In,{className:"text-ui-fg-subtle"}),rt("asc",s)),t.createElement(A.RadioItem,{onSelect:u=>u.preventDefault(),value:"true",className:"flex items-center gap-2"},t.createElement(An,{className:"text-ui-fg-subtle"}),rt("desc",s))))))};Ue.displayName="DataTable.SortingMenu";function Jn(n){var e,a,l;const s=n.columnDef.meta;let c;return typeof n.columnDef.header=="string"&&(c=n.columnDef.header),(l=(a=(e=s==null?void 0:s.___sortMetaData)===null||e===void 0?void 0:e.sortLabel)!==null&&a!==void 0?a:c)!==null&&l!==void 0?l:n.id}function rt(n,e){var a,l,s,c;if(!e)return null;const r=e.columnDef.meta;switch(n){case"asc":return(l=(a=r==null?void 0:r.___sortMetaData)===null||a===void 0?void 0:a.sortAscLabel)!==null&&l!==void 0?l:"A-Z";case"desc":return(c=(s=r==null?void 0:r.___sortMetaData)===null||s===void 0?void 0:s.sortDescLabel)!==null&&c!==void 0?c:"Z-A"}}const Zn=()=>t.createElement(G,{className:"size-7"}),et=({clearAllFiltersLabel:n="Clear all",alwaysShow:e=!1,sortingTooltip:a,columnsTooltip:l,children:s})=>{const{instance:c,enableColumnVisibility:r}=q(),[d,m]=t.useState([]),u=c.getFiltering(),o=c.getFilters();t.useEffect(()=>{m(p=>{const w=Object.keys(u),g=p.map(D=>D.id),C=p.filter(D=>w.includes(D.id)||D.isNew);return w.forEach(D=>{g.includes(D)||C.push({id:D,value:u[D],isNew:!1})}),C.length!==p.length||C.some((D,T)=>{var I;return D.id!==((I=p[T])===null||I===void 0?void 0:I.id)})?C:p})},[u]);const i=t.useCallback((p,w)=>{m(g=>[...g,{id:p,value:w,isNew:!0}])},[]),v=t.useCallback((p,w)=>{m(g=>g.map(C=>C.id===p?{...C,value:w,isNew:!1}:C)),w!=null&&w!==""&&!(Array.isArray(w)&&w.length===0)&&c.updateFilter({id:p,value:w})},[c]),h=t.useCallback(p=>{m(w=>w.filter(g=>g.id!==p)),u[p]!==void 0&&c.removeFilter(p)},[c,u]);t.useCallback(()=>{m([]),c.clearFilters()},[c]);const y=d.length,b=o.length>0,f=c.getAllColumns().filter(p=>p.getCanSort()),x=c.enableSorting&&f.length>0;return y===0&&!b&&!x&&!r&&!e&&!s?null:c.showSkeleton?t.createElement(Qn,{filterCount:y}):t.createElement("div",{className:"bg-ui-bg-subtle flex w-full flex-nowrap items-center justify-between gap-2 overflow-x-auto border-t px-6 py-2"},t.createElement("div",{className:"flex flex-nowrap items-center gap-2 md:flex-wrap"},d.map(p=>t.createElement(yt,{key:p.id,id:p.id,filter:p.value,isNew:p.isNew,onUpdate:w=>v(p.id,w),onRemove:()=>h(p.id)})),b&&t.createElement(Qe,{onAddFilter:i})),t.createElement("div",{className:"flex flex-shrink-0 items-center gap-2"},x&&t.createElement(Ue,{tooltip:a}),r&&t.createElement(ht,{tooltip:l}),s))};et.displayName="DataTable.FilterBar";const Qn=({filterCount:n})=>t.createElement("div",{className:"bg-ui-bg-subtle flex w-full flex-nowrap items-center gap-2 overflow-x-auto border-t px-6 py-2 md:flex-wrap"},Array.from({length:n}).map((e,a)=>t.createElement(G,{key:a,className:"h-7 w-[180px]"})),n>0?t.createElement(G,{className:"h-7 w-[66px]"}):null),St=n=>{const{instance:e}=q();if(!e.enablePagination)throw new Error("DataTable.Pagination was rendered but pagination is not enabled. Make sure to pass pagination to 'useDataTable'");return e.showSkeleton?t.createElement(Un,null):t.createElement(W.Pagination,{translations:n.translations,className:"flex-shrink-0",canNextPage:e.getCanNextPage(),canPreviousPage:e.getCanPreviousPage(),pageCount:e.getPageCount(),count:e.rowCount,nextPage:e.nextPage,previousPage:e.previousPage,pageIndex:e.pageIndex,pageSize:e.pageSize})};St.displayName="DataTable.Pagination";const Un=()=>t.createElement("div",null,t.createElement("div",{className:"flex items-center justify-between p-4"},t.createElement(G,{className:"h-7 w-[138px]"}),t.createElement("div",{className:"flex items-center gap-x-2"},t.createElement(G,{className:"h-7 w-24"}),t.createElement(G,{className:"h-7 w-11"}),t.createElement(G,{className:"h-7 w-11"})))),Dt=n=>{const{className:e,...a}=n,{instance:l}=q();if(!l.enableSearch)throw new Error("DataTable.Search was rendered but search is not enabled. Make sure to pass search to 'useDataTable'");return l.showSkeleton?t.createElement(ea,null):t.createElement(He,{size:"small",type:"search",value:l.getSearch(),onChange:s=>l.onSearchChange(s.target.value),className:V({"pr-[calc(15px+2px+8px)]":l.isLoading},e),...a})};Dt.displayName="DataTable.Search";const ea=()=>t.createElement(G,{className:"h-7 w-[128px]"});function tt(n,e,a){const l=n.slice();return l.splice(a<0?l.length+a:a,0,l.splice(e,1)[0]),l}function ta(n,e){return n.reduce((a,l,s)=>{const c=e.get(l);return c&&(a[s]=c),a},Array(n.length))}function je(n){return n!==null&&n>=0}function na(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let a=0;a<n.length;a++)if(n[a]!==e[a])return!1;return!0}function aa(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const Pe={scaleX:1,scaleY:1},la=n=>{var e;let{rects:a,activeNodeRect:l,activeIndex:s,overIndex:c,index:r}=n;const d=(e=a[s])!=null?e:l;if(!d)return null;const m=sa(a,r,s);if(r===s){const u=a[c];return u?{x:s<c?u.left+u.width-(d.left+d.width):u.left-d.left,y:0,...Pe}:null}return r>s&&r<=c?{x:-d.width-m,y:0,...Pe}:r<s&&r>=c?{x:d.width+m,y:0,...Pe}:{x:0,y:0,...Pe}};function sa(n,e,a){const l=n[e],s=n[e-1],c=n[e+1];return!l||!s&&!c?0:a<e?s?l.left-(s.left+s.width):c.left-(l.left+l.width):c?c.left-(l.left+l.width):l.left-(s.left+s.width)}const Nt=n=>{let{rects:e,activeIndex:a,overIndex:l,index:s}=n;const c=tt(e,l,a),r=e[s],d=c[s];return!d||!r?null:{x:d.left-r.left,y:d.top-r.top,scaleX:d.width/r.width,scaleY:d.height/r.height}},kt="Sortable",Tt=H.createContext({activeIndex:-1,containerId:kt,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Nt,disabled:{draggable:!1,droppable:!1}});function ra(n){let{children:e,id:a,items:l,strategy:s=Nt,disabled:c=!1}=n;const{active:r,dragOverlay:d,droppableRects:m,over:u,measureDroppableContainers:o}=Ut(),i=en(kt,a),v=d.rect!==null,h=t.useMemo(()=>l.map(D=>typeof D=="object"&&"id"in D?D.id:D),[l]),y=r!=null,b=r?h.indexOf(r.id):-1,f=u?h.indexOf(u.id):-1,x=t.useRef(h),p=!na(h,x.current),w=f!==-1&&b===-1||p,g=aa(c);ct(()=>{p&&y&&o(h)},[p,h,y,o]),t.useEffect(()=>{x.current=h},[h]);const C=t.useMemo(()=>({activeIndex:b,containerId:i,disabled:g,disableTransforms:w,items:h,overIndex:f,useDragOverlay:v,sortedRects:ta(h,m),strategy:s}),[b,i,g.draggable,g.droppable,w,h,f,m,v,s]);return H.createElement(Tt.Provider,{value:C},e)}const oa=n=>{let{id:e,items:a,activeIndex:l,overIndex:s}=n;return tt(a,l,s).indexOf(e)},ca=n=>{let{containerId:e,isSorting:a,wasDragging:l,index:s,items:c,newIndex:r,previousItems:d,previousContainerId:m,transition:u}=n;return!u||!l||d!==c&&s===r?!1:a?!0:r!==s&&e===m},ia={duration:200,easing:"ease"},_t="transform",ua=Be.Transition.toString({property:_t,duration:0,easing:"linear"}),da={roleDescription:"sortable"};function ma(n){let{disabled:e,index:a,node:l,rect:s}=n;const[c,r]=t.useState(null),d=t.useRef(a);return ct(()=>{if(!e&&a!==d.current&&l.current){const m=s.current;if(m){const u=sn(l.current,{ignoreTransform:!0}),o={x:m.left-u.left,y:m.top-u.top,scaleX:m.width/u.width,scaleY:m.height/u.height};(o.x||o.y)&&r(o)}}a!==d.current&&(d.current=a)},[e,a,l,s]),t.useEffect(()=>{c&&r(null)},[c]),c}function Ft(n){let{animateLayoutChanges:e=ca,attributes:a,disabled:l,data:s,getNewIndex:c=oa,id:r,strategy:d,resizeObserverConfig:m,transition:u=ia}=n;const{items:o,containerId:i,activeIndex:v,disabled:h,disableTransforms:y,sortedRects:b,overIndex:f,useDragOverlay:x,strategy:p}=t.useContext(Tt),w=fa(l,h),g=o.indexOf(r),C=t.useMemo(()=>({sortable:{containerId:i,index:g,items:o},...s}),[i,s,g,o]),D=t.useMemo(()=>o.slice(o.indexOf(r)),[o,r]),{rect:T,node:I,isOver:_,setNodeRef:P}=tn({id:r,data:C,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...m}}),{active:k,activatorEvent:O,activeNodeRect:S,attributes:j,setNodeRef:B,listeners:U,isDragging:$,over:Ce,setActivatorNodeRef:de,transform:me}=nn({id:r,data:C,attributes:{...da,...a},disabled:w.draggable}),ve=an(P,B),J=!!k,ee=J&&!y&&je(v)&&je(f),M=!x&&$,le=M&&ee?me:null,Z=ee?le??(d??p)({rects:b,activeNodeRect:S,activeIndex:v,overIndex:f,index:g}):null,Q=je(v)&&je(f)?c({id:r,items:o,activeIndex:v,overIndex:f}):g,te=k==null?void 0:k.id,L=t.useRef({activeId:te,items:o,newIndex:Q,containerId:i}),ne=o!==L.current.items,he=e({active:k,containerId:i,isDragging:$,isSorting:J,id:r,index:g,items:o,newIndex:L.current.newIndex,previousItems:L.current.items,previousContainerId:L.current.containerId,transition:u,wasDragging:L.current.activeId!=null}),fe=ma({disabled:!he,index:g,node:I,rect:T});return t.useEffect(()=>{J&&L.current.newIndex!==Q&&(L.current.newIndex=Q),i!==L.current.containerId&&(L.current.containerId=i),o!==L.current.items&&(L.current.items=o)},[J,Q,i,o]),t.useEffect(()=>{if(te===L.current.activeId)return;if(te&&!L.current.activeId){L.current.activeId=te;return}const Y=setTimeout(()=>{L.current.activeId=te},50);return()=>clearTimeout(Y)},[te]),{active:k,activeIndex:v,attributes:j,data:C,rect:T,index:g,newIndex:Q,items:o,isOver:_,isSorting:J,isDragging:$,listeners:U,node:I,overIndex:f,over:Ce,setNodeRef:ve,setActivatorNodeRef:de,setDroppableNodeRef:P,setDraggableNodeRef:B,transform:fe??Z,transition:Se()};function Se(){if(fe||ne&&L.current.newIndex===g)return ua;if(!(M&&!ln(O)||!u)&&(J||he))return Be.Transition.toString({...u,property:_t})}}function fa(n,e){var a,l;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(a=n==null?void 0:n.draggable)!=null?a:e.draggable,droppable:(l=n==null?void 0:n.droppable)!=null?l:e.droppable}}function $e(n){if(!n)return!1;const e=n.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const ga=[ie.Down,ie.Right,ie.Up,ie.Left],ba=(n,e)=>{let{context:{active:a,collisionRect:l,droppableRects:s,droppableContainers:c,over:r,scrollableAncestors:d}}=e;if(ga.includes(n.code)){if(n.preventDefault(),!a||!l)return;const m=[];c.getEnabled().forEach(i=>{if(!i||i!=null&&i.disabled)return;const v=s.get(i.id);if(v)switch(n.code){case ie.Down:l.top<v.top&&m.push(i);break;case ie.Up:l.top>v.top&&m.push(i);break;case ie.Left:l.left>v.left&&m.push(i);break;case ie.Right:l.left<v.left&&m.push(i);break}});const u=Gt({collisionRect:l,droppableRects:s,droppableContainers:m});let o=Jt(u,"id");if(o===(r==null?void 0:r.id)&&u.length>1&&(o=u[1].id),o!=null){const i=c.get(a.id),v=c.get(o),h=v?s.get(v.id):null,y=v==null?void 0:v.node.current;if(y&&h&&i&&v){const f=Zt(y).some((D,T)=>d[T]!==D),x=It(i,v),p=pa(i,v),w=f||!x?{x:0,y:0}:{x:p?l.width-h.width:0,y:p?l.height-h.height:0},g={x:h.left,y:h.top};return w.x&&w.y?g:Qt(g,w)}}}};function It(n,e){return!$e(n)||!$e(e)?!1:n.data.current.sortable.containerId===e.data.current.sortable.containerId}function pa(n,e){return!$e(n)||!$e(e)||!It(n,e)?!1:n.data.current.sortable.index<e.data.current.sortable.index}var ue;(function(n){n.EMPTY="EMPTY",n.FILTERED_EMPTY="FILTERED_EMPTY",n.POPULATED="POPULATED"})(ue||(ue={}));const ke=n=>{const e=n.direction==="asc",a=n.direction==="desc",l=e||a;return t.createElement("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:V("opacity-0 transition-opacity group-hover:opacity-100",{"opacity-100":l})},t.createElement("path",{d:"M5.82651 5.75C5.66344 5.74994 5.50339 5.71269 5.36308 5.64216C5.22277 5.57162 5.10736 5.47039 5.02891 5.34904C4.95045 5.22769 4.91184 5.09067 4.9171 4.95232C4.92236 4.81397 4.97131 4.67936 5.05882 4.56255L7.64833 1.10788C7.73055 0.998207 7.84403 0.907911 7.97827 0.845354C8.11252 0.782797 8.26318 0.75 8.41632 0.75C8.56946 0.75 8.72013 0.782797 8.85437 0.845354C8.98862 0.907911 9.1021 0.998207 9.18432 1.10788L11.7744 4.56255C11.862 4.67939 11.9109 4.81405 11.9162 4.95245C11.9214 5.09085 11.8827 5.2279 11.8042 5.34926C11.7257 5.47063 11.6102 5.57185 11.4698 5.64235C11.3294 5.71285 11.1693 5.75003 11.0061 5.75H5.82651Z",className:V("fill-ui-fg-muted",{"fill-ui-fg-subtle":e})}),t.createElement("path",{d:"M11.0067 9.25C11.1698 9.25006 11.3299 9.28731 11.4702 9.35784C11.6105 9.42838 11.7259 9.52961 11.8043 9.65096C11.8828 9.77231 11.9214 9.90933 11.9162 10.0477C11.9109 10.186 11.8619 10.3206 11.7744 10.4374L9.18492 13.8921C9.10271 14.0018 8.98922 14.0921 8.85498 14.1546C8.72074 14.2172 8.57007 14.25 8.41693 14.25C8.26379 14.25 8.11312 14.2172 7.97888 14.1546C7.84464 14.0921 7.73115 14.0018 7.64894 13.8921L5.05882 10.4374C4.97128 10.3206 4.92233 10.1859 4.9171 10.0476C4.91186 9.90915 4.95053 9.7721 5.02905 9.65074C5.10758 9.52937 5.22308 9.42815 5.36347 9.35765C5.50387 9.28715 5.664 9.24997 5.82712 9.25H11.0067Z",className:V("fill-ui-fg-muted",{"fill-ui-fg-subtle":a})}))};ke.displayName="DataTable.SortingIcon";const At=t.forwardRef(({id:n,children:e,className:a,style:l,isFirstColumn:s,...c},r)=>{const{attributes:d,listeners:m,setNodeRef:u,transform:o,transition:i,isDragging:v}=Ft({id:n}),h=o?{x:o.x,y:0,scaleX:1,scaleY:1}:null,y={...l,transform:h?Be.Transform.toString(h):void 0,transition:i,opacity:v?.8:1,zIndex:v?50:void 0,backgroundColor:"white",position:"relative"},b=f=>{u(f),r&&(typeof r=="function"?r(f):r.current=f)};return t.createElement(W.HeaderCell,{ref:b,style:y,className:V(a,"group/header-cell relative"),...d,...m,...c},e)});At.displayName="DataTableSortableHeaderCell";const Rt=t.forwardRef(({id:n,children:e,className:a,style:l,isFirstColumn:s,...c},r)=>{const{setNodeRef:d,transform:m,transition:u}=Ft({id:n,disabled:!0}),o=m?{x:m.x,y:0,scaleX:m.scaleX,scaleY:m.scaleY}:null,i={...l,transform:o?Be.Transform.toString(o):void 0,transition:u,position:"relative"},v=h=>{d(h),r&&(typeof r=="function"?r(h):r.current=h)};return t.createElement(W.HeaderCell,{ref:v,style:i,className:a,...c},e)});Rt.displayName="DataTableNonSortableHeaderCell";const jt=n=>{const e=t.useRef(null),a=t.useRef(!1),[l,s]=t.useState(!1),c=t.useRef(null),{instance:r}=q(),d=r.pageIndex,m=r.getAllColumns(),u=m.find(b=>b.id==="select"),o=m.find(b=>b.id==="action"),i=t.useMemo(()=>r.columnOrder&&r.columnOrder.length>0?r.columnOrder:m.map(b=>b.id),[m,r.columnOrder]),v=rn(nt(cn,{activationConstraint:{distance:8}}),nt(on,{coordinateGetter:ba})),h=b=>{const{active:f,over:x}=b;if(f.id!==(x==null?void 0:x.id)&&(x!=null&&x.id)){const p=f.id,w=x.id;if(p==="select"||p==="action"||w==="select"||w==="action")return;const g=r.columnOrder&&r.columnOrder.length>0?r.columnOrder:m.map(T=>T.id),C=g.indexOf(p),D=g.indexOf(w);if(C!==-1&&D!==-1){const T=tt(g,C,D);r.setColumnOrderFromArray(T)}}};t.useEffect(()=>{const b=x=>{const p=wa();if(x.key.toLowerCase()==="x"&&e&&!a.current&&!p){a.current=!0;const w=r.getRowModel().rows.find(g=>g.id===e.current);w&&w.getCanSelect()&&w.toggleSelected()}},f=x=>{x.key.toLowerCase()==="x"&&(a.current=!1)};return document.addEventListener("keydown",b),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",f)}},[e,r]);const y=b=>{b.currentTarget.scrollLeft>0?s(!0):s(!1)};return t.useEffect(()=>{var b;(b=c.current)===null||b===void 0||b.scroll({top:0,left:0})},[d]),r.showSkeleton?t.createElement(ha,{pageSize:r.pageSize}):t.createElement("div",{className:"flex w-full flex-1 flex-col overflow-hidden"},r.emptyState===ue.POPULATED&&(r.enableColumnOrder?t.createElement(un,{sensors:v,collisionDetection:dn,onDragEnd:h},t.createElement("div",{ref:c,onScroll:y,className:"min-h-0 w-full flex-1 overflow-auto overscroll-none border-y"},t.createElement(W,{className:"relative isolate w-full"},t.createElement(W.Header,{className:"shadow-ui-border-base sticky inset-x-0 top-0 z-[1] w-full border-b-0 border-t-0 shadow-[0_1px_1px_0]",style:{transform:"translate3d(0,0,0)"}},r.getHeaderGroups().map(b=>t.createElement(W.Row,{key:b.id,className:V("border-b-0",{"[&_th:last-of-type]:w-[1%] [&_th:last-of-type]:whitespace-nowrap":o,"[&_th:first-of-type]:w-[1%] [&_th:first-of-type]:whitespace-nowrap":u})},t.createElement(ra,{items:i,strategy:la},b.headers.map((f,x)=>{var p,w;const g=f.column.getCanSort(),C=f.column.getIsSorted(),D=f.column.getToggleSortingHandler(),T=f.id==="action",I=f.id==="select",_=T||I,P=!_,k=g?"button":"div",O=u?x===1:x===0,S=((w=(p=f.column.columnDef.meta)===null||p===void 0?void 0:p.___alignMetaData)===null||w===void 0?void 0:w.headerAlign)||"left",j=S==="right",B=S==="center",U=P?At:Rt;return t.createElement(U,{key:f.id,id:f.id,isFirstColumn:O,className:V("whitespace-nowrap",{"w-[calc(20px+24px+24px)] min-w-[calc(20px+24px+24px)] max-w-[calc(20px+24px+24px)]":I,"w-[calc(28px+24px+4px)] min-w-[calc(28px+24px+4px)] max-w-[calc(28px+24px+4px)]":T,"after:absolute after:inset-y-0 after:right-0 after:h-full after:w-px after:bg-transparent after:content-['']":O,"after:bg-ui-border-base":l&&O,"bg-ui-bg-subtle sticky":O||I,"left-0":I||O&&!u,"left-[calc(20px+24px+24px)]":O&&u}),style:_?void 0:{width:f.column.columnDef.size,maxWidth:f.column.columnDef.maxSize,minWidth:f.column.columnDef.minSize}},t.createElement(k,{type:g?"button":void 0,onClick:g?D:void 0,onMouseDown:g?$=>$.stopPropagation():void 0,className:V("group flex cursor-default items-center gap-2",{"cursor-pointer":g,"w-full":j||B,"w-fit":!j&&!B,"justify-end":j,"justify-center":B})},g&&j&&t.createElement(ke,{direction:C}),Ie(f.column.columnDef.header,f.getContext()),g&&!j&&t.createElement(ke,{direction:C})))}))))),t.createElement(W.Body,{className:"border-b-0 border-t-0"},r.getRowModel().rows.map(b=>t.createElement(W.Row,{key:b.id,onMouseEnter:()=>e.current=b.id,onMouseLeave:()=>e.current=null,onClick:f=>{var x;return(x=r.onRowClick)===null||x===void 0?void 0:x.call(r,f,b)},className:V("group/row last-of-type:border-b-0",{"cursor-pointer":!!r.onRowClick})},b.getVisibleCells().map((f,x)=>{const p=f.column.id==="select",w=f.column.id==="action",g=p||w,C=u?x===1:x===0;return t.createElement(W.Cell,{key:f.id,className:V("items-stretch truncate whitespace-nowrap",{"w-[calc(20px+24px+24px)] min-w-[calc(20px+24px+24px)] max-w-[calc(20px+24px+24px)]":p,"w-[calc(28px+24px+4px)] min-w-[calc(28px+24px+4px)] max-w-[calc(28px+24px+4px)]":w,"bg-ui-bg-base group-hover/row:bg-ui-bg-base-hover transition-fg sticky h-full":C||p,"after:absolute after:inset-y-0 after:right-0 after:h-full after:w-px after:bg-transparent after:content-['']":C,"after:bg-ui-border-base":l&&C,"left-0":p||C&&!u,"left-[calc(20px+24px+24px)]":C&&u}),style:g?void 0:{width:f.column.columnDef.size,maxWidth:f.column.columnDef.maxSize,minWidth:f.column.columnDef.minSize}},Ie(f.column.columnDef.cell,f.getContext()))}))))))):t.createElement("div",{ref:c,onScroll:y,className:"min-h-0 w-full flex-1 overflow-auto overscroll-none border-y"},t.createElement(W,{className:"relative isolate w-full"},t.createElement(W.Header,{className:"shadow-ui-border-base sticky inset-x-0 top-0 z-[1] w-full border-b-0 border-t-0 shadow-[0_1px_1px_0]",style:{transform:"translate3d(0,0,0)"}},r.getHeaderGroups().map(b=>t.createElement(W.Row,{key:b.id,className:V("border-b-0",{"[&_th:last-of-type]:w-[1%] [&_th:last-of-type]:whitespace-nowrap":o,"[&_th:first-of-type]:w-[1%] [&_th:first-of-type]:whitespace-nowrap":u})},b.headers.map((f,x)=>{var p,w;const g=f.column.getCanSort(),C=f.column.getIsSorted(),D=f.column.getToggleSortingHandler(),T=f.id==="action",I=f.id==="select",_=T||I,P=g?"button":"div",k=u?x===1:x===0,O=((w=(p=f.column.columnDef.meta)===null||p===void 0?void 0:p.___alignMetaData)===null||w===void 0?void 0:w.headerAlign)||"left",S=O==="right",j=O==="center";return t.createElement(W.HeaderCell,{key:f.id,className:V("whitespace-nowrap",{"w-[calc(20px+24px+24px)] min-w-[calc(20px+24px+24px)] max-w-[calc(20px+24px+24px)]":I,"w-[calc(28px+24px+4px)] min-w-[calc(28px+24px+4px)] max-w-[calc(28px+24px+4px)]":T,"after:absolute after:inset-y-0 after:right-0 after:h-full after:w-px after:bg-transparent after:content-['']":k,"after:bg-ui-border-base":l&&k,"bg-ui-bg-subtle sticky":k||I,"left-0":I||k&&!u,"left-[calc(20px+24px+24px)]":k&&u}),style:_?void 0:{width:f.column.columnDef.size,maxWidth:f.column.columnDef.maxSize,minWidth:f.column.columnDef.minSize}},t.createElement(P,{type:g?"button":void 0,onClick:g?D:void 0,onMouseDown:g?B=>B.stopPropagation():void 0,className:V("group flex cursor-default items-center gap-2",{"cursor-pointer":g,"w-full":S||j,"w-fit":!S&&!j,"justify-end":S,"justify-center":j})},g&&S&&t.createElement(ke,{direction:C}),Ie(f.column.columnDef.header,f.getContext()),g&&!S&&t.createElement(ke,{direction:C})))})))),t.createElement(W.Body,{className:"border-b-0 border-t-0"},r.getRowModel().rows.map(b=>t.createElement(W.Row,{key:b.id,onMouseEnter:()=>e.current=b.id,onMouseLeave:()=>e.current=null,onClick:f=>{var x;return(x=r.onRowClick)===null||x===void 0?void 0:x.call(r,f,b)},className:V("group/row last-of-type:border-b-0",{"cursor-pointer":!!r.onRowClick})},b.getVisibleCells().map((f,x)=>{const p=f.column.id==="select",w=f.column.id==="action",g=p||w,C=u?x===1:x===0;return t.createElement(W.Cell,{key:f.id,className:V("items-stretch truncate whitespace-nowrap",{"w-[calc(20px+24px+24px)] min-w-[calc(20px+24px+24px)] max-w-[calc(20px+24px+24px)]":p,"w-[calc(28px+24px+4px)] min-w-[calc(28px+24px+4px)] max-w-[calc(28px+24px+4px)]":w,"bg-ui-bg-base group-hover/row:bg-ui-bg-base-hover transition-fg sticky h-full":C||p,"after:absolute after:inset-y-0 after:right-0 after:h-full after:w-px after:bg-transparent after:content-['']":C,"after:bg-ui-border-base":l&&C,"left-0":p||C&&!u,"left-[calc(20px+24px+24px)]":C&&u}),style:g?void 0:{width:f.column.columnDef.size,maxWidth:f.column.columnDef.maxSize,minWidth:f.column.columnDef.minSize}},Ie(f.column.columnDef.cell,f.getContext()))}))))))),t.createElement(xa,{state:r.emptyState,props:n.emptyState}))};jt.displayName="DataTable.Table";const va=({heading:n,description:e})=>t.createElement("div",{className:"flex size-full flex-col items-center justify-center gap-2"},t.createElement(Me,{size:"base",weight:"plus"},n),t.createElement(Me,null,e)),xa=({state:n,props:e})=>{var a;if(n===ue.POPULATED)return null;const l=n===ue.EMPTY?e==null?void 0:e.empty:e==null?void 0:e.filtered;return t.createElement("div",{className:"flex min-h-[250px] w-full flex-1 flex-col items-center justify-center border-y px-6 py-4"},(a=l==null?void 0:l.custom)!==null&&a!==void 0?a:t.createElement(va,{heading:l==null?void 0:l.heading,description:l==null?void 0:l.description}))},ha=({pageSize:n=10})=>t.createElement("div",{className:"flex w-full flex-1 flex-col overflow-hidden"},t.createElement("div",{className:"min-h-0 w-full flex-1 overscroll-none border-y"},t.createElement("div",{className:"flex flex-col divide-y"},t.createElement(G,{className:"h-12 w-full"}),Array.from({length:n},(e,a)=>a).map(e=>t.createElement(G,{key:e,className:"h-12 w-full rounded-none"})))));function wa(){const n=document?document.activeElement:null;return n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||(n==null?void 0:n.getAttribute("contenteditable"))==="true"}const Ea=n=>{var e,a,l;const{instance:s}=q(),c=s.getFilters().length>0;return t.createElement("div",{className:"flex flex-col divide-y"},t.createElement("div",{className:V("flex items-center px-6 py-4",n.className)},n.children),t.createElement(et,{clearAllFiltersLabel:(e=n.translations)===null||e===void 0?void 0:e.clearAll,alwaysShow:c,sortingTooltip:(a=n.translations)===null||a===void 0?void 0:a.sort,columnsTooltip:(l=n.translations)===null||l===void 0?void 0:l.columns},n.filterBarContent))},ya=({instance:n,children:e})=>t.createElement(vt.Provider,{value:{instance:n,enableColumnVisibility:n.enableColumnVisibility,enableColumnOrder:n.enableColumnOrder}},e),Pt=({instance:n,children:e,className:a})=>t.createElement(ya,{instance:n},t.createElement("div",{className:V("relative flex min-h-0 flex-1 flex-col",a)},e));Pt.displayName="DataTable";const oe=Object.assign(Pt,{Table:jt,Toolbar:Ea,Search:Dt,SortingMenu:Ue,FilterMenu:Qe,FilterBar:et,ColumnVisibilityMenu:ht,Pagination:St,CommandBar:xt}),Ca=({rowCount:n=0,filters:e,commands:a,rowSelection:l,sorting:s,filtering:c,pagination:r,search:d,onRowClick:m,autoResetPageIndex:u=!0,isLoading:o=!1,columnVisibility:i,columnOrder:v,...h})=>{var y,b,f,x,p,w;const{state:g,onSortingChange:C}=s??{},{state:D,onFilteringChange:T}=c??{},{state:I,onPaginationChange:_}=r??{},{state:P,onRowSelectionChange:k,enableRowSelection:O}=l??{},{state:S,onColumnVisibilityChange:j}=i??{},{state:B,onColumnOrderChange:U}=v??{},$=t.useCallback(()=>u?()=>I&&(_==null?void 0:_({...I,pageIndex:0})):void 0,[u,I,_]),Ce=t.useCallback(()=>C?N=>{var F;(F=$())===null||F===void 0||F(),Sa(C,g)(N)}:void 0,[C,g,$]),de=t.useCallback(()=>k?N=>{Da(k,P)(N)}:void 0,[k,P,$]),me=t.useCallback(()=>T?N=>{var F;(F=$())===null||F===void 0||F(),Na(T,D)(N)}:void 0,[T,D,$]),ve=t.useCallback(()=>_?ka(_,I):void 0,[_,I]),J=t.useCallback(()=>j?N=>{const F=typeof N=="function"?N(S??{}):N;j(F)}:void 0,[j,S]),ee=t.useCallback(()=>U?N=>{const F=typeof N=="function"?N(B??[]):N;U(F)}:void 0,[U,B]),M=mn({...h,getCoreRowModel:fn(),state:{rowSelection:P??{},sorting:g?[g]:void 0,columnFilters:Object.entries(D??{}).map(([N,F])=>({id:N,value:F})),pagination:I,columnVisibility:S??{},columnOrder:B??[]},enableRowSelection:O,rowCount:n,onColumnFiltersChange:me(),onRowSelectionChange:de(),onSortingChange:Ce(),onPaginationChange:ve(),onColumnVisibilityChange:J(),onColumnOrderChange:ee(),manualSorting:!0,manualPagination:!0,manualFiltering:!0}),le=t.useCallback(()=>{var N,F;return(F=(N=M.getState().sorting)===null||N===void 0?void 0:N[0])!==null&&F!==void 0?F:null},[M]),xe=t.useCallback(N=>{var F,K,De;const qt=(K=(F=M.getState().sorting)===null||F===void 0?void 0:F[0])!==null&&K!==void 0?K:null,Wt=typeof N=="function"?N(qt):N;(De=$())===null||De===void 0||De(),M.setSorting([Wt])},[M,$]),Z=t.useCallback(()=>e??[],[e]),Q=t.useCallback(N=>{const F=Z().find(K=>K.id===N);return F&&F.options||null},[Z]),te=t.useCallback(N=>Z().find(F=>F.id===N)||null,[Z]),L=t.useCallback(()=>{var N;const F=(N=M.getState().columnFilters)!==null&&N!==void 0?N:[];return Object.fromEntries(F.map(K=>[K.id,K.value]))},[M]),ne=t.useCallback(N=>{var F;const De={...L(),[N.id]:N.value};(F=$())===null||F===void 0||F(),T==null||T(De)},[T,L,$]),he=t.useCallback(N=>{var F;const K=L();delete K[N],(F=$())===null||F===void 0||F(),T==null||T(K)},[T,L,$]),fe=t.useCallback(()=>{var N;(N=$())===null||N===void 0||N(),T==null||T({})},[T,$]),Se=t.useCallback(N=>{ne(N)},[ne]),{state:Y,onSearchChange:we,debounce:ge=300}=d??{},[_e,Fe]=t.useState(Y??""),be=t.useRef();t.useEffect(()=>{Fe(Y??"")},[Y]);const Ke=t.useCallback(()=>_e,[_e]),pe=t.useMemo(()=>{if(we)return N=>{var F;if(be.current&&clearTimeout(be.current),ge<=0){(F=$())===null||F===void 0||F(),we(N);return}be.current=setTimeout(()=>{var K;(K=$())===null||K===void 0||K(),we(N)},ge)}},[we,ge,$]);t.useEffect(()=>()=>{be.current&&clearTimeout(be.current)},[]);const qe=t.useCallback(N=>{Fe(N),pe==null||pe(N)},[pe]),We=t.useCallback(()=>a??[],[a]),Ye=t.useCallback(()=>M.getState().rowSelection,[M]),R=M.getRowModel().rows,z=t.useMemo(()=>{const N=R.length>0,F=!!Y,K=Object.keys(D??{}).length>0;return N?ue.POPULATED:F||K?ue.FILTERED_EMPTY:ue.EMPTY},[R,Y,D]),X=t.useMemo(()=>o===!0&&R.length===0,[o,R]),ae=!!r,se=!!c,Vt=!!s,zt=!!d,Ht=!!i,Bt=!!v,Kt=t.useCallback(N=>{M.setColumnOrder(N)},[M]);return{getHeaderGroups:M.getHeaderGroups,getRowModel:M.getRowModel,getAllColumns:M.getAllColumns,setColumnVisibility:M.setColumnVisibility,setColumnOrder:M.setColumnOrder,enablePagination:ae,getCanNextPage:M.getCanNextPage,getCanPreviousPage:M.getCanPreviousPage,nextPage:M.nextPage,previousPage:M.previousPage,getPageCount:M.getPageCount,pageIndex:(f=(b=(y=M.getState())===null||y===void 0?void 0:y.pagination)===null||b===void 0?void 0:b.pageIndex)!==null&&f!==void 0?f:0,pageSize:(w=(p=(x=M.getState())===null||x===void 0?void 0:x.pagination)===null||p===void 0?void 0:p.pageSize)!==null&&w!==void 0?w:10,rowCount:n,enableSearch:zt,getSearch:Ke,onSearchChange:qe,enableSorting:Vt,getSorting:le,setSorting:xe,enableFiltering:se,getFilters:Z,getFilterOptions:Q,getFilterMeta:te,getFiltering:L,addFilter:ne,removeFilter:he,clearFilters:fe,updateFilter:Se,getCommands:We,getRowSelection:Ye,onRowClick:m,emptyState:z,isLoading:o,showSkeleton:X,enableColumnVisibility:Ht,enableColumnOrder:Bt,columnOrder:M.getState().columnOrder,setColumnOrderFromArray:Kt}};function Sa(n,e){return a=>{const s=(typeof a=="function"?a(e?[e]:[]):a)[0];n(s)}}function Da(n,e){return a=>{const l=typeof a=="function"?a(e??{}):a;n(l)}}function Na(n,e){return a=>{const l=typeof a=="function"?a(Object.entries(e??{}).map(([c,r])=>({id:c,value:r}))):a,s=Object.fromEntries(l.map(c=>[c.id,c.value]));n(s)}}function ka(n,e){return a=>{const l=typeof a=="function"?a(e??{pageIndex:0,pageSize:10}):a;n(l)}}const Mt=({ctx:n})=>{const e=n.column.columnDef.meta,a=e==null?void 0:e.___actions;if(!a)return null;const l=typeof a=="function"?a(n):a;return Array.isArray(l)?t.createElement(A,null,t.createElement(A.Trigger,{asChild:!0,className:"ml-1"},t.createElement(ze,{size:"small",variant:"transparent"},t.createElement(gn,null))),t.createElement(A.Content,{side:"bottom"},l.map((s,c)=>{const r=Array.isArray(s),d=c===l.length-1;return r?t.createElement(t.Fragment,{key:c},s.map(m=>t.createElement(A.Item,{key:m.label,onClick:u=>{u.stopPropagation(),m.onClick(n)},className:"[&>svg]:text-ui-fg-subtle flex items-center gap-2"},m.icon,m.label)),!d&&t.createElement(A.Separator,null)):t.createElement(A.Item,{key:s.label,onClick:m=>{m.stopPropagation(),s.onClick(n)},className:"[&>svg]:text-ui-fg-subtle flex items-center gap-2"},s.icon,s.label)}))):null};Mt.displayName="DataTable.ActionCell";const Lt=n=>{const e=n.ctx.row.getIsSelected(),a=n.ctx.row.getToggleSelectedHandler(),l=!n.ctx.row.getCanSelect();return t.createElement(ye,{onClick:s=>s.stopPropagation(),checked:e,onCheckedChange:a,disabled:l})};Lt.displayName="DataTable.SelectCell";const Ta=n=>{const e=n.ctx.table.getIsSomePageRowsSelected()?"indeterminate":n.ctx.table.getIsAllPageRowsSelected(),a=s=>{n.ctx.table.toggleAllPageRowsSelected(!!s)},l=!n.ctx.table.getRowModel().rows.some(s=>s.getCanSelect());return t.createElement(ye,{onClick:s=>s.stopPropagation(),checked:e,onCheckedChange:a,disabled:l})},Ua=()=>{const{accessor:n,display:e}=it();return{accessor:(a,l)=>{const{sortLabel:s,sortAscLabel:c,sortDescLabel:r,headerAlign:d,meta:m,enableSorting:u,...o}=l,i={___sortMetaData:{sortLabel:s,sortAscLabel:c,sortDescLabel:r},___alignMetaData:{headerAlign:d},...m||{}};return n(a,{...o,enableSorting:u??!1,meta:i})},display:e,action:({actions:a,...l})=>e({id:"action",cell:s=>t.createElement(Mt,{ctx:s}),meta:{___actions:a,...l.meta||{}},...l}),select:a=>e({id:"select",header:a!=null&&a.header?a.header:l=>t.createElement(Ta,{ctx:l}),cell:a!=null&&a.cell?a.cell:l=>t.createElement(Lt,{ctx:l})})}},_a=it();_a.accessor("name",{meta:{}});var Ve=(n,e)=>{let a=e;a||(n instanceof kn||n.message?a=n.message:a="An error occurred"),Te.error(a)},Ot=n=>{const e=dt("view_configurations"),a=wn(n,{limit:100},{enabled:e&&!!n}),l=En(n,{enabled:e&&!!n}),s=yn(n,{onSuccess:()=>{Te.success("View created")},onError:r=>{Ve(r,"Failed to create view")}}),c=Cn(n,{onSuccess:()=>{},onError:r=>{Ve(r,"Failed to update active view")}});return t.useMemo(()=>({isViewConfigEnabled:e,listViews:a,activeView:l,createView:s,setActiveView:c,isDefaultViewActive:(l==null?void 0:l.is_default_active)??!0}),[e,a,l,s,c])},$t=(n,e)=>{const a=Sn(n,e,{onSuccess:()=>{Te.success("View updated")},onError:s=>{Ve(s,"Failed to update view")}}),l=Dn(n,e,{onSuccess:()=>{Te.success("View deleted successfully")},onError:s=>{Ve(s,"Failed to delete view")}});return{updateView:a,deleteView:l}},Fa=({entity:n,currentColumns:e,currentConfiguration:a,editingView:l,onClose:s,onSaved:c})=>{const{createView:r}=Ot(n),{updateView:d}=$t(n,(l==null?void 0:l.id)||""),[m,u]=t.useState(!1),{register:o,handleSubmit:i,formState:{errors:v}}=Nn({defaultValues:{name:(l==null?void 0:l.name)||""}}),h=async y=>{if(y.name.trim()){u(!0);try{if(l){const b=await d.mutateAsync({name:y.name.trim(),configuration:{visible_columns:(e==null?void 0:e.visible)||l.configuration.visible_columns,column_order:(e==null?void 0:e.order)||l.configuration.column_order,filters:(a==null?void 0:a.filters)||l.configuration.filters||{},sorting:(a==null?void 0:a.sorting)||l.configuration.sorting||null,search:(a==null?void 0:a.search)||l.configuration.search||""}});c(b.view_configuration)}else{const b=await r.mutateAsync({name:y.name.trim(),set_active:!0,configuration:{visible_columns:(e==null?void 0:e.visible)||[],column_order:(e==null?void 0:e.order)||[],filters:(a==null?void 0:a.filters)||{},sorting:(a==null?void 0:a.sorting)||null,search:(a==null?void 0:a.search)||""}});c(b.view_configuration)}}catch{}finally{u(!1)}}};return E.jsx(re,{open:!0,onOpenChange:s,children:E.jsxs(re.Content,{className:"flex flex-col",children:[E.jsxs(re.Header,{children:[E.jsx(re.Title,{asChild:!0,children:E.jsx(mt,{children:l?"Edit View Name":"Save as New View"})}),E.jsx(re.Description,{asChild:!0,children:E.jsx(Me,{children:l?"Change the name of your saved view":"Save your current configuration as a new view"})})]}),E.jsxs("form",{onSubmit:i(h),className:"flex flex-1 flex-col",children:[E.jsx(re.Body,{className:"flex-1",children:E.jsxs("div",{className:"flex flex-col gap-y-2",children:[E.jsx(Ge,{htmlFor:"name",weight:"plus",children:"View Name"}),E.jsx(He,{...o("name",{required:"Name is required",validate:y=>y.trim().length>0||"Name cannot be empty"}),type:"text",placeholder:"Enter view name",autoFocus:!0}),v.name&&E.jsx("span",{className:"text-sm text-ui-fg-error",children:v.name.message})]})}),E.jsxs(re.Footer,{children:[E.jsx(re.Close,{asChild:!0,children:E.jsx(Le,{variant:"secondary",size:"small",type:"button",children:"Cancel"})}),E.jsx(Le,{variant:"primary",size:"small",type:"submit",isLoading:m,children:l?"Update":"Save"})]})]})]})})},Ia=({entity:n,currentColumns:e,currentConfiguration:a})=>{const{listViews:l,activeView:s,setActiveView:c,isDefaultViewActive:r}=Ot(n),d=(l==null?void 0:l.view_configurations)||[],[m,u]=t.useState(!1),[o,i]=t.useState(null),[v,h]=t.useState(null),[y,b]=t.useState({x:0,y:0}),[f,x]=t.useState(null),p=Rn(),w=(s==null?void 0:s.view_configuration)||null,{deleteView:g}=$t(n,f||""),C=async S=>{try{if(S===null){await c.mutateAsync(null);return}d.find(B=>B.id===S)&&await c.mutateAsync(S)}catch(j){console.error("Error in handleViewSelect:",j)}},D=async S=>{await p({title:"Delete view",description:`Are you sure you want to delete "${S.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel"})&&x(S.id)};t.useEffect(()=>{f&&g.mutateAsync&&g.mutateAsync().then(()=>{x(null)}).catch(()=>{x(null)})},[f,g.mutateAsync]);const T=S=>{i(S),u(!0)},I=async S=>{await p({title:"Reset system default",description:"This will delete the saved system default and revert to the original code-level defaults. All users will be affected. Are you sure?",confirmText:"Reset",cancelText:"Cancel"})&&x(S.id)},_=d.find(S=>S.is_system_default),P=d.filter(S=>!S.is_system_default),k=r;return E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("div",{className:"relative inline-block",children:[E.jsx(at,{color:k?"blue":"grey",size:"xsmall",className:"cursor-pointer",onClick:()=>C(null),onContextMenu:S=>{S.preventDefault(),_&&(b({x:S.clientX,y:S.clientY}),h("default"))},children:"Default"}),_&&v==="default"&&E.jsxs(A,{open:!0,onOpenChange:S=>{S||h(null)},children:[E.jsx(A.Trigger,{asChild:!0,children:E.jsx("div",{style:{position:"fixed",left:y.x,top:y.y,width:0,height:0}})}),E.jsx(A.Content,{align:"start",sideOffset:0,children:E.jsxs(A.Item,{onClick:()=>{I(_),h(null)},className:"flex items-center gap-x-2",children:[E.jsx(xn,{className:"text-ui-fg-subtle"}),E.jsx("span",{children:"Reset to code defaults"})]})})]})]}),P.length>0&&E.jsx("div",{className:"text-ui-fg-muted",children:"|"}),P.map(S=>E.jsxs("div",{className:"relative inline-block",children:[E.jsx(at,{color:(w==null?void 0:w.id)===S.id?"blue":"grey",size:"xsmall",className:"cursor-pointer",onClick:()=>C(S.id),onContextMenu:j=>{j.preventDefault(),b({x:j.clientX,y:j.clientY}),h(S.id)},children:S.name}),v===S.id&&E.jsxs(A,{open:!0,onOpenChange:j=>{j||h(null)},children:[E.jsx(A.Trigger,{asChild:!0,children:E.jsx("div",{style:{position:"fixed",left:y.x,top:y.y,width:0,height:0}})}),E.jsxs(A.Content,{align:"start",sideOffset:0,children:[E.jsxs(A.Item,{onClick:()=>{T(S),h(null)},className:"flex items-center gap-x-2",children:[E.jsx(jn,{className:"text-ui-fg-subtle"}),E.jsx("span",{children:"Edit name"})]}),E.jsxs(A.Item,{onClick:()=>{D(S),h(null)},className:"flex items-center gap-x-2 text-ui-fg-error",children:[E.jsx(Pn,{}),E.jsx("span",{children:"Delete"})]})]})]})]},S.id))]}),m&&E.jsx(Fa,{entity:n,currentColumns:e,currentConfiguration:a,editingView:o,onClose:()=>{u(!1),i(null)},onSaved:async S=>{u(!1),i(null),Te.success(`View "${S.name}" saved successfully`)}})]})},el=({data:n=[],columns:e,filters:a,commands:l,action:s,actionMenu:c,getRowId:r,rowCount:d=0,enablePagination:m=!0,enableSearch:u=!0,autoFocusSearch:o=!1,rowHref:i,heading:v,subHeading:h,prefix:y,pageSize:b=10,emptyState:f,rowSelection:x,isLoading:p=!1,layout:w="auto",enableColumnVisibility:g=!1,initialColumnVisibility:C={},onColumnVisibilityChange:D,columnOrder:T,onColumnOrderChange:I,enableViewSelector:_=!1,entity:P,currentColumns:k,filterBarContent:O})=>{const{t:S}=ut(),j=dt("view_configurations"),B=j&&g,U=j&&_,$=a&&a.length>0,Ce=l&&l.length>0,de=e.some(R=>R.enableSorting),[me,ve]=H.useState(C);H.useEffect(()=>{const R=Object.keys(me).sort(),z=Object.keys(C).sort();(R.length!==z.length||R.some((ae,se)=>ae!==z[se])||Object.entries(C).some(([ae,se])=>me[ae]!==se))&&ve(C)},[C]);const J=H.useCallback(R=>{ve(R),D==null||D(R)},[D]),ee=t.useMemo(()=>(a==null?void 0:a.map(R=>R.id))??[],[a]),M=ee.map(R=>ce(R,y)),{offset:le,order:xe,q:Z,...Q}=Tn([...ee,...de?["order"]:[],...u?["q"]:[],...m?["offset"]:[]],y),[te,L]=bn(),ne=t.useMemo(()=>Z??"",[Z]),he=R=>{L(z=>(R?z.set(ce("q",y),R):z.delete(ce("q",y)),z))},fe=t.useMemo(()=>le?Pa(le,b):{pageIndex:0,pageSize:b},[le,b]),Se=R=>{L(z=>(R.pageIndex===0?z.delete(ce("offset",y)):z.set(ce("offset",y),ja(R).toString()),z))},Y=t.useMemo(()=>Ma(ee,Q),[ee,Q]),we=R=>{L(z=>(Array.from(z.keys()).forEach(X=>{M.includes(X)&&((y?X.replace(`${y}_`,""):X)in R||z.delete(X))}),Object.entries(R).forEach(([X,ae])=>{const se=ce(X,y);ae!==void 0?z.set(se,JSON.stringify(ae)):z.delete(se)}),z))},ge=t.useMemo(()=>xe?Ra(xe):null,[xe]),_e=t.useMemo(()=>({filters:Y,sorting:ge,search:ne}),[Y,ge,ne]),Fe=R=>{L(z=>{if(R){const X=Aa(R);z.set(ce("order",y),X)}else z.delete(ce("order",y));return z})},{pagination:be,toolbar:Ke}=La(),pe=pn(),qe=t.useCallback((R,z)=>{if(!i)return;const X=i(z);if(R.metaKey||R.ctrlKey||R.button===1){window.open(X,"_blank","noreferrer");return}if(R.shiftKey){window.open(X,void 0,"noreferrer");return}pe(X)},[pe,i]),We=Ca({data:n,columns:e,filters:a,commands:l,rowCount:d,getRowId:r,onRowClick:i?qe:void 0,pagination:m?{state:fe,onPaginationChange:Se}:void 0,filtering:$?{state:Y,onFilteringChange:we}:void 0,sorting:de?{state:ge,onSortingChange:Fe}:void 0,search:u?{state:ne,onSearchChange:he}:void 0,rowSelection:x,isLoading:p,columnVisibility:B?{state:me,onColumnVisibilityChange:J}:void 0,columnOrder:B&&T&&I?{state:T,onColumnOrderChange:I}:void 0}),Ye=v||h;return E.jsxs(oe,{instance:We,className:w==="fill"?"h-full [&_tr]:last-of-type:!border-b":void 0,children:[E.jsx(oe.Toolbar,{className:"flex flex-col items-start justify-between gap-2 md:flex-row md:items-center",translations:Ke,filterBarContent:O,children:E.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[E.jsxs("div",{className:"flex items-center gap-x-4",children:[Ye&&E.jsxs("div",{children:[v&&E.jsx(mt,{children:v}),h&&E.jsx(Me,{size:"small",className:"text-ui-fg-subtle",children:h})]}),U&&P&&E.jsx(Ia,{entity:P,currentColumns:k,currentConfiguration:_e})]}),E.jsxs("div",{className:"flex items-center gap-x-2",children:[$&&E.jsx(oe.FilterMenu,{}),de&&E.jsx(oe.SortingMenu,{}),u&&E.jsx("div",{className:"w-full md:w-auto",children:E.jsx(oe.Search,{placeholder:S("filters.searchLabel"),autoFocus:o})}),c&&E.jsx(vn,{variant:"primary",...c}),s&&E.jsx(Oa,{...s})]})]})}),E.jsx(oe.Table,{emptyState:f}),m&&E.jsx(oe.Pagination,{translations:be}),Ce&&E.jsx(oe.CommandBar,{selectedLabel:R=>`${R} selected`})]})};function Aa(n){return n.desc?`-${n.id}`:n.id}function Ra(n){return n.startsWith("-")?{id:n.slice(1),desc:!0}:{id:n,desc:!1}}function ja(n){return n.pageIndex*n.pageSize}function Pa(n,e){const a=parseInt(n);return{pageIndex:Math.floor(a/e),pageSize:e}}function Ma(n,e){if(!e)return{};const a={};for(const l of n){const s=e[l];s!==void 0&&(a[l]=JSON.parse(s))}return a}function ce(n,e){return e?`${e}_${n}`:n}var La=()=>{const{t:n}=ut(),e={of:n("general.of"),results:n("general.results"),pages:n("general.pages"),prev:n("general.prev"),next:n("general.next")},a={clearAll:n("actions.clearAll"),sort:n("filters.sortLabel"),columns:"Columns"};return{pagination:e,toolbar:a}},Oa=({label:n,disabled:e,...a})=>{const l={size:"small",disabled:e??!1,type:"button",variant:"secondary"};return"to"in a?E.jsx(Le,{...l,asChild:!0,children:E.jsx(hn,{to:a.to,children:n})}):E.jsx(Le,{...l,onClick:a.onClick,children:n})};export{el as D,Fa as S,$t as a,Ua as c,Ot as u};
