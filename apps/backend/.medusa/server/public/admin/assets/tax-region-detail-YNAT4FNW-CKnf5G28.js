import{T as N,u as _,a as w,b as E}from"./chunk-EE7SOCEQ-B13aw_F8.js";import{u as C,a as D,T as O}from"./chunk-CK3VFTZM-DApsMnFG.js";import{T as z}from"./chunk-5NQ3X2JI-C_zW384f.js";import{a as T}from"./chunk-EHAU7SOS-BdFruKSz.js";import{f as B}from"./chunk-IR5DHEKS-aVJcUHa1.js";import{a4 as k,r as R,d as A,gA as I,a as L,j as e,eI as q,b as d,U as f,B as h,a7 as F,a9 as G,gv as H,H as g,k as S}from"./index-BpfPnGdZ.js";import{gB as De,gC as Oe}from"./index-BpfPnGdZ.js";import"./lodash-t7RC0x8y.js";import{S as J}from"./chunk-2RQLKDBF-CaKeP8OW.js";import{a as Q}from"./chunk-X6DSNTTX-Cg52juiW.js";import{A as X}from"./alert-N-NMZIr-.js";import{C as p}from"./container-CaN4_t7k.js";import"./chunk-C76H5USB-Dd196HiU.js";import"./chunk-ENNEJRBR--ihHhQFK.js";import"./chunk-4FM6S5CX-BpW1LsFY.js";import"./chunk-YEDAFXMB-DSZvk7zJ.js";import"./chunk-AOFGTNG6-CDM44hkC.js";import"./table-DW79ophy.js";import"./chunk-EMIHDNB7-SccrBMEV.js";import"./plus-mini-DwCGy8dy.js";import"./chunk-GRT22PE5-RHOJWQnO.js";import"./pencil-square-B6or-DO4.js";import"./trash-CDEOtOav.js";import"./arrow-down-right-mini-LuG0iYCZ.js";import"./status-badge-ohAqEdgy.js";import"./chunk-EQTBJSBZ-CF8tpKF3.js";import"./react-country-flag.esm-NdtiIxYy.js";import"./use-prompt-Cv7F2RTx.js";import"./prompt-CpsPiMDa.js";import"./Trans-CBu9SpTd.js";import"./x-mark-mini-hOCHhWa9.js";import"./check-vtHah2d6.js";var Z=({taxRegion:s})=>{const{t:r}=d(),i=s.tax_rates.filter(a=>a.is_default===!0),t=i.length===0;return e.jsxs(p,{className:"divide-y p-0",children:[e.jsx(z,{taxRegion:s,type:"header",asLink:!1,badge:t&&e.jsx(F,{content:r("taxRegions.fields.noDefaultRate.tooltip"),children:e.jsx(G,{color:"orange",size:"2xsmall",className:"cursor-default",children:r("taxRegions.fields.noDefaultRate.label")})})}),i.map(a=>e.jsx(N,{taxRate:a},a.id))]})},v=10,j="p",U=({taxRegion:s,showSublevelRegions:r})=>{const{t:i}=d(),{searchParams:t,raw:a}=C({pageSize:v,prefix:j}),{tax_regions:o,count:n,isPending:c,isError:l,error:m}=H({...t,parent_id:s.id},{placeholderData:S}),{table:y}=D({count:n,data:o,pageSize:v,prefix:j}),x=T(s.country_code);if(!x&&!r&&!s.children.length)return null;const P=(x==null?void 0:x.type)||"sublevel";if(l)throw m;return e.jsx(p,{className:"divide-y p-0",children:e.jsx(O,{variant:"province",action:{to:"provinces/create",label:i("actions.create")},table:y,isPending:c,queryObject:a,count:n,children:e.jsx(g,{level:"h2",children:i(`taxRegions.${P}.header`)})})})},b=10,u="o",W=({taxRegion:s})=>{const{t:r}=d(),{searchParams:i,raw:t}=_({pageSize:b,prefix:u}),{tax_rates:a,count:o,isPending:n,isError:c,error:l}=Q({...i,tax_region_id:s.id,is_default:!1},{placeholderData:S}),{table:m}=w({count:o,data:a,pageSize:b,prefix:u});if(c)throw l;return e.jsx(p,{className:"p-0",children:e.jsx(E,{isPending:n,table:m,count:o,action:{label:r("actions.create"),to:"overrides/create"},queryObject:t,prefix:u,children:e.jsx(g,{level:"h2",children:r("taxRegions.taxOverrides.header")})})})},$=({taxRegion:s,showSublevelRegions:r,setShowSublevelRegions:i})=>{const{t}=d(),[a,o]=R.useState(!1);return T(s.country_code)||r||a||s.children.length?null:e.jsx(X,{dismissible:!0,variant:"info",className:"bg-ui-bg-base",children:e.jsxs("div",{className:"flex flex-col gap-y-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(f,{size:"small",leading:"compact",weight:"plus",asChild:!0,children:e.jsx("h2",{children:t("taxRegions.fields.sublevels.alert.header")})}),e.jsx(f,{size:"small",leading:"compact",className:"text-pretty",children:t("taxRegions.fields.sublevels.alert.description")})]}),e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx(h,{variant:"secondary",size:"small",onClick:()=>i(!0),children:t("taxRegions.fields.sublevels.alert.action")}),e.jsx(h,{variant:"transparent",size:"small",onClick:()=>o(!0),children:t("actions.hide")})]})]})})};function K({taxRegion:s}){const{t:r}=d();return e.jsxs(p,{className:"divide-y p-0",children:[e.jsx(g,{level:"h2",className:"px-6 py-4",children:r("taxRegions.provider.header")}),e.jsx("div",{className:"px-6 py-4",children:s.provider_id&&e.jsx("span",{className:"text-ui-fg-subtle",children:B(s.provider_id)})})]})}var we=()=>{const{id:s}=k(),[r,i]=R.useState(!1),t=A(),{tax_region:a,isLoading:o,isError:n,error:c}=I(s,void 0,{initialData:t}),{getWidgets:l}=L();if(o||!a)return e.jsx(q,{sections:4,showJSON:!0});if(n)throw c;return e.jsxs(J,{data:a,showJSON:!0,widgets:{after:l("tax.details.after"),before:l("tax.details.before")},children:[e.jsx($,{taxRegion:a,showSublevelRegions:r,setShowSublevelRegions:i}),e.jsx(Z,{taxRegion:a}),e.jsx(U,{taxRegion:a,showSublevelRegions:r}),e.jsx(W,{taxRegion:a}),e.jsx(K,{taxRegion:a})]})};export{De as Breadcrumb,we as Component,we as TaxRegionDetail,Oe as loader};
