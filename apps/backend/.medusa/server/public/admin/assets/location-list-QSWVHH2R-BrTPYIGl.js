import{B as S}from"./chunk-BKJC5BGQ-_475RWWs.js";import{L as E}from"./chunk-6WKBBTKM-BUb6pZvg.js";import{S as h,a as P}from"./chunk-LBIOZZPA-C1MiE6qv.js";import{r,d as O,eb as T,a as C,j as e,e9 as M,q as g,b as o,H as b,U as l,B as z,L as B,fE as q,ab as D,A as F,s as K,fF as A,t as j}from"./index-BpfPnGdZ.js";import{a as H}from"./chunk-B6ZOPCPA-COFsw84B.js";import{T as p}from"./chunk-2RQLKDBF-CaKeP8OW.js";import{u as I}from"./use-prompt-Cv7F2RTx.js";import{P as Q}from"./pencil-square-B6or-DO4.js";import{T as R}from"./trash-CDEOtOav.js";import{C as m}from"./container-CaN4_t7k.js";import{S as $}from"./status-badge-ohAqEdgy.js";import"./chunk-EQTBJSBZ-CF8tpKF3.js";import"./Trans-CBu9SpTd.js";import"./x-mark-mini-hOCHhWa9.js";import"./check-vtHah2d6.js";import"./prompt-CpsPiMDa.js";var W=Object.defineProperty,f=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,y=(s,t,i)=>t in s?W(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i,J=(s,t)=>{for(var i in t||(t={}))L.call(t,i)&&y(s,i,t[i]);if(f)for(var i of f(t))_.call(t,i)&&y(s,i,t[i]);return s},U=(s,t)=>{var i={};for(var a in s)L.call(s,a)&&t.indexOf(a)<0&&(i[a]=s[a]);if(s!=null&&f)for(var a of f(s))t.indexOf(a)<0&&_.call(s,a)&&(i[a]=s[a]);return i};const w=r.forwardRef((s,t)=>{var i=s,{color:a="currentColor"}=i,n=U(i,["color"]);return r.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:t},n),r.createElement("g",{stroke:a,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#a)"},r.createElement("path",{d:"M3.472 12.938a1.41 1.41 0 1 0 0-2.82 1.41 1.41 0 0 0 0 2.82M9.312 12.938a1.41 1.41 0 1 0 0-2.82 1.41 1.41 0 0 0 0 2.82M7.918 11.326H4.882M4.076 2.465h3.625c.89 0 1.612.721 1.612 1.611v6.042"}),r.createElement("path",{d:"M9.313 4.882h1.775c.274 0 .53.14.677.37l1.447 2.25c.084.13.128.281.128.436v1.777a1.61 1.61 0 0 1-1.61 1.611h-1.008M9.313 7.701h3.95M2.465 4.882H5.89M.854 7.299h3.424"})),r.createElement("defs",null,r.createElement("clipPath",{id:"a"},r.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});w.displayName="TruckFast";var k="name,*sales_channels,*address,*fulfillment_sets,*fulfillment_sets.service_zones,*fulfillment_sets.service_zones.shipping_options,*fulfillment_sets.service_zones.shipping_options.shipping_profile",V=()=>({queryKey:M.lists(),queryFn:async()=>await K.admin.stockLocation.list({fields:k}).catch(s=>{throw s.status===401?A("/login"):s})}),ge=async s=>{const t=V();return g.getQueryData(t.queryKey)??await g.fetchQuery(t)};function Y(s){const{t}=o(),{salesChannels:i}=s;return e.jsx("div",{className:"flex flex-col px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{size:"small",weight:"plus",className:"text-ui-fg-subtle flex-1",as:"div",children:t("stockLocations.salesChannels.label")}),e.jsx("div",{className:"flex-1 text-left",children:i!=null&&i.length?e.jsx(S,{rounded:!0,inline:!0,n:3,list:i.map(a=>a.name)}):"-"})]})})}function v(s){const{t}=o(),{fulfillmentSet:i,type:a}=s,n=!!i;return e.jsx("div",{className:"flex flex-col px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{size:"small",weight:"plus",className:"text-ui-fg-subtle flex-1",as:"div",children:t(`stockLocations.fulfillmentSets.${a}.header`)}),e.jsx("div",{className:"flex-1 text-left",children:e.jsx($,{color:n?"green":"grey",children:t(n?"statuses.enabled":"statuses.disabled")})})]})})}function G(s){var u,x;const{location:t}=s,{t:i}=o(),a=I(),{mutateAsync:n}=q(t.id),c=async()=>{await a({title:i("general.areYouSure"),description:i("stockLocations.delete.confirmation",{name:t.name}),confirmText:i("actions.remove"),cancelText:i("actions.cancel")})&&await n(void 0,{onSuccess:()=>{j.success(i("shippingProfile.delete.successToast",{name:t.name}))},onError:N=>{j.error(N.message)}})};return e.jsxs(m,{className:"flex flex-col divide-y p-0",children:[e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-row items-center justify-between gap-x-4",children:[e.jsx("div",{className:"shadow-borders-base flex size-7 items-center justify-center rounded-md",children:e.jsx("div",{className:"bg-ui-bg-field flex size-6 items-center justify-center rounded-[4px]",children:e.jsx(D,{className:"text-ui-fg-subtle"})})}),e.jsxs("div",{className:"grow-1 flex flex-1 flex-col",children:[e.jsx(l,{weight:"plus",children:t.name}),e.jsx(l,{className:"text-ui-fg-subtle txt-small",children:H({address:t.address}).join(", ")})]}),e.jsxs("div",{className:"flex grow-0 items-center gap-4",children:[e.jsx(F,{groups:[{actions:[{label:i("actions.edit"),icon:e.jsx(Q,{}),to:`/settings/locations/${t.id}/edit`}]},{actions:[{label:i("actions.delete"),icon:e.jsx(R,{}),onClick:c}]}]}),e.jsx("div",{className:"bg-ui-border-strong h-[12px] w-[1px]"}),e.jsx(E,{to:`/settings/locations/${t.id}`,children:i("actions.viewDetails")})]})]})}),e.jsx(Y,{salesChannels:t.sales_channels}),e.jsx(v,{type:"pickup",fulfillmentSet:(u=t.fulfillment_sets)==null?void 0:u.find(d=>d.type==="pickup")}),e.jsx(v,{type:"shipping",fulfillmentSet:(x=t.fulfillment_sets)==null?void 0:x.find(d=>d.type==="shipping")})]})}var X=G,Z=()=>{const{t:s}=o();return e.jsxs(m,{className:"flex h-fit items-center justify-between gap-x-4 px-6 py-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:s("stockLocations.domain")}),e.jsx(l,{className:"text-ui-fg-subtle txt-small",children:s("stockLocations.list.description")})]}),e.jsx(z,{size:"small",className:"shrink-0",variant:"secondary",asChild:!0,children:e.jsx(B,{to:"create",children:s("actions.create")})})]})};function je(){const s=O(),{stock_locations:t=[],isError:i,error:a}=T({fields:k},{initialData:s}),{getWidgets:n}=C();if(i)throw a;return e.jsxs(p,{widgets:{after:n("location.list.after"),before:n("location.list.before"),sideAfter:n("location.list.side.after"),sideBefore:n("location.list.side.before")},showJSON:!0,children:[e.jsxs(p.Main,{children:[e.jsx(Z,{}),e.jsx("div",{className:"flex flex-col gap-3 lg:col-span-2",children:t.map(c=>e.jsx(X,{location:c},c.id))})]}),e.jsx(p.Sidebar,{children:e.jsx(ee,{})})]})}var ee=()=>{const{t:s}=o();return e.jsxs(m,{className:"p-0",children:[e.jsx("div",{className:"flex items-center justify-between px-6 py-4",children:e.jsx(b,{level:"h2",children:s("stockLocations.sidebar.header")})}),e.jsx(h,{to:"/settings/locations/shipping-profiles",labelKey:s("stockLocations.sidebar.shippingProfiles.label"),descriptionKey:s("stockLocations.sidebar.shippingProfiles.description"),icon:e.jsx(P,{})}),e.jsx(h,{to:"/settings/locations/shipping-option-types",labelKey:s("stockLocations.sidebar.shippingOptionTypes.label"),descriptionKey:s("stockLocations.sidebar.shippingOptionTypes.description"),icon:e.jsx(w,{})})]})};export{je as Component,ge as loader};
