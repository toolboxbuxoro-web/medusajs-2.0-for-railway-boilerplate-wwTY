import{c as Xt}from"./chunk-Y2RYZS5B-DyMrZ3o1.js";import{r as u,d8 as Ae,bS as Jt,bW as pt,cW as qt,d9 as en,da as fe,b2 as tn,j as d,aS as Je,f as nn,M as q,Q as be,a7 as ze,a9 as sn,v as rn,bo as gt,bI as ln,bL as on,bN as bt,db as an,dc as cn,b as ie,dd as K,bf as ue,de as un,B as de,df as dn,dg as hn,dh as fn,di as mn,dj as pn,dk as gn,H as bn,dl as vn,c1 as qe,dm as wn,R as xn,Y as Cn,I as yn,U as _n}from"./index-BpfPnGdZ.js";import{i as Ne,a as Sn,f as En,e as Mn,c as kn}from"./_isIndex-CA4sJ4fU.js";import{A as In}from"./adjustments-CM1kR1Ir.js";import{C as jn}from"./checkbox-DCa7E6TW.js";var Dn=Object.defineProperty,me=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,et=(e,n,t)=>n in e?Dn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,On=(e,n)=>{for(var t in n||(n={}))vt.call(n,t)&&et(e,t,n[t]);if(me)for(var t of me(n))wt.call(n,t)&&et(e,t,n[t]);return e},An=(e,n)=>{var t={};for(var s in e)vt.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&me)for(var s of me(e))n.indexOf(s)<0&&wt.call(e,s)&&(t[s]=e[s]);return t};const xt=u.forwardRef((e,n)=>{var t=e,{color:s="currentColor"}=t,r=An(t,["color"]);return u.createElement("svg",On({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:n},r),u.createElement("g",{clipPath:"url(#a)"},u.createElement("path",{fill:s,d:"M8.5 2.528h-.778a.75.75 0 1 0 0 1.5h1.08a4 4 0 0 1-.302-1.5M10.695 6.07a4 4 0 0 1-1.21-.94.75.75 0 0 0-.29.592V6.75H1.5a.75.75 0 0 0 0 1.5h7.694v1.028a.75.75 0 0 0 1.5 0zM5.806 1.5a.75.75 0 1 0-1.5 0v1.028H1.5a.75.75 0 0 0 0 1.5h2.806v1.028a.75.75 0 0 0 1.5 0V1.5M12.611 6.75a.75.75 0 0 0 0 1.5h.889a.75.75 0 0 0 0-1.5zM6.972 11.722a.75.75 0 0 1 .75-.75H13.5a.75.75 0 1 1 0 1.5H7.722a.75.75 0 0 1-.75-.75M1.5 10.972a.75.75 0 0 0 0 1.5h2.806V13.5a.75.75 0 0 0 1.5 0V9.944a.75.75 0 1 0-1.5 0v1.028z"}),u.createElement("circle",{cx:12.5,cy:2.5,r:2.5,fill:"#2563EB"}),u.createElement("circle",{cx:12.5,cy:2.5,r:2.25,stroke:s,strokeOpacity:.24,strokeWidth:.5})),u.createElement("defs",null,u.createElement("clipPath",{id:"a"},u.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});xt.displayName="AdjustmentsDone";var zn=Object.defineProperty,pe=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable,tt=(e,n,t)=>n in e?zn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Nn=(e,n)=>{for(var t in n||(n={}))Ct.call(n,t)&&tt(e,t,n[t]);if(pe)for(var t of pe(n))yt.call(n,t)&&tt(e,t,n[t]);return e},Fn=(e,n)=>{var t={};for(var s in e)Ct.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&pe)for(var s of pe(e))n.indexOf(s)<0&&yt.call(e,s)&&(t[s]=e[s]);return t};const _t=u.forwardRef((e,n)=>{var t=e,{color:s="currentColor"}=t,r=Fn(t,["color"]);return u.createElement("svg",Nn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:n},r),u.createElement("path",{fill:s,fillRule:"evenodd",d:"M6.713.838a1.61 1.61 0 0 1 1.574 0l4.521 2.531h.001c.507.286.823.823.823 1.407v.356c0 .89-.722 1.611-1.611 1.611l-9.042.001c-.89 0-1.611-.722-1.611-1.611v-.357c0-.582.314-1.12.823-1.406zm.842 1.309a.11.11 0 0 0-.108 0L2.924 4.678a.11.11 0 0 0-.056.097v.357c0 .061.05.111.111.111h9.042c.06 0 .11-.05.11-.112v-.356a.11.11 0 0 0-.056-.098zM2.979 7.396a.75.75 0 0 1 .75.75v3.986h1.514V8.146a.75.75 0 0 1 1.5 0v3.986h.41c.414 0 .78.344.78.759 0 .414-.366.741-.78.741H2.117a.75.75 0 0 1 0-1.5h.111V8.146a.75.75 0 0 1 .75-.75M9.338 8.72a.75.75 0 0 1 1.06 0l1.623 1.622 1.622-1.622a.75.75 0 1 1 1.06 1.06l-1.621 1.623 1.622 1.622a.75.75 0 0 1-1.06 1.061l-1.623-1.623-1.623 1.623a.75.75 0 0 1-1.06-1.06l1.622-1.623L9.338 9.78a.75.75 0 0 1 0-1.06",clipRule:"evenodd"}),u.createElement("path",{fill:s,d:"M7.5 4.701a.861.861 0 1 0 0-1.722.861.861 0 0 0 0 1.722"}))});_t.displayName="TaxExclusive";var Pn=Object.defineProperty,ge=Object.getOwnPropertySymbols,St=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable,nt=(e,n,t)=>n in e?Pn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Rn=(e,n)=>{for(var t in n||(n={}))St.call(n,t)&&nt(e,t,n[t]);if(ge)for(var t of ge(n))Et.call(n,t)&&nt(e,t,n[t]);return e},$n=(e,n)=>{var t={};for(var s in e)St.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&ge)for(var s of ge(e))n.indexOf(s)<0&&Et.call(e,s)&&(t[s]=e[s]);return t};const Mt=u.forwardRef((e,n)=>{var t=e,{color:s="currentColor"}=t,r=$n(t,["color"]);return u.createElement("svg",Rn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:n},r),u.createElement("path",{fill:s,fillRule:"evenodd",d:"M6.713.838a1.61 1.61 0 0 1 1.574 0l4.521 2.531h.001c.507.286.823.823.823 1.407v.356c0 .89-.722 1.611-1.611 1.611l-9.042.001c-.89 0-1.611-.722-1.611-1.611v-.357c0-.582.314-1.12.824-1.406zm.842 1.309a.11.11 0 0 0-.108 0L2.925 4.678a.11.11 0 0 0-.057.097v.357c0 .061.05.111.111.111h9.042c.06 0 .11-.05.11-.112v-.356a.11.11 0 0 0-.056-.098zM2.979 7.396a.75.75 0 0 1 .75.75v3.986h1.514V8.146a.75.75 0 0 1 1.5 0v3.986h.346c.414 0 .812.337.812.75 0 .415-.398.75-.812.75H2.118a.75.75 0 0 1 0-1.5h.111V8.146a.75.75 0 0 1 .75-.75m6.028 0a.75.75 0 0 1 .75.75v1.292a.75.75 0 0 1-1.5 0V8.146a.75.75 0 0 1 .75-.75m5.588.733a.75.75 0 0 1 .2 1.042l-3.215 4.736a.75.75 0 0 1-1.16.1l-1.522-1.579a.75.75 0 0 1 1.08-1.041l.88.913 2.695-3.971a.75.75 0 0 1 1.042-.2",clipRule:"evenodd"}),u.createElement("path",{fill:s,d:"M7.5 4.701a.861.861 0 1 0 0-1.722.861.861 0 0 0 0 1.722"}))});Mt.displayName="TaxInclusive";var Tn=Ne,Gn=Ae,Wn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vn=/^\w*$/;function Kn(e,n){if(Tn(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||Gn(e)?!0:Vn.test(e)||!Wn.test(e)||n!=null&&e in Object(n)}var Ln=Kn,kt=Sn,Hn="Expected a function";function Fe(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(Hn);var t=function(){var s=arguments,r=n?n.apply(this,s):s[0],l=t.cache;if(l.has(r))return l.get(r);var o=e.apply(this,s);return t.cache=l.set(r,o)||l,o};return t.cache=new(Fe.Cache||kt),t}Fe.Cache=kt;var Bn=Fe,Un=Bn,Yn=500;function Zn(e){var n=Un(e,function(s){return t.size===Yn&&t.clear(),s}),t=n.cache;return n}var Qn=Zn,Xn=Qn,Jn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qn=/\\(\\)?/g,es=Xn(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Jn,function(t,s,r,l){n.push(r?l.replace(qn,"$1"):s||t)}),n}),ts=es;function ns(e,n){for(var t=-1,s=e==null?0:e.length,r=Array(s);++t<s;)r[t]=n(e[t],t,e);return r}var ss=ns,st=Jt,rs=ss,ls=Ne,is=Ae,rt=st?st.prototype:void 0,lt=rt?rt.toString:void 0;function It(e){if(typeof e=="string")return e;if(ls(e))return rs(e,It)+"";if(is(e))return lt?lt.call(e):"";var n=e+"";return n=="0"&&1/e==-1/0?"-0":n}var os=It,as=os;function cs(e){return e==null?"":as(e)}var us=cs,ds=Ne,hs=Ln,fs=ts,ms=us;function ps(e,n){return ds(e)?e:hs(e,n)?[e]:fs(ms(e))}var jt=ps,gs=Ae;function bs(e){if(typeof e=="string"||gs(e))return e;var n=e+"";return n=="0"&&1/e==-1/0?"-0":n}var Dt=bs,vs=jt,ws=Dt;function xs(e,n){n=vs(n,e);for(var t=0,s=n.length;e!=null&&t<s;)e=e[ws(n[t++])];return t&&t==s?e:void 0}var Cs=xs,ys=Cs;function _s(e,n,t){var s=e==null?void 0:ys(e,n);return s===void 0?t:s}var Ss=_s;const Es=pt(Ss);var Ms=En,ks=function(){try{var e=Ms(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Is=ks,it=Is;function js(e,n,t){n=="__proto__"&&it?it(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}var Ds=js,Os=Ds,As=Mn,zs=Object.prototype,Ns=zs.hasOwnProperty;function Fs(e,n,t){var s=e[n];(!(Ns.call(e,n)&&As(s,t))||t===void 0&&!(n in e))&&Os(e,n,t)}var Ps=Fs,Rs=Ps,$s=jt,Ts=kn,ot=qt,Gs=Dt;function Ws(e,n,t,s){if(!ot(e))return e;n=$s(n,e);for(var r=-1,l=n.length,o=l-1,i=e;i!=null&&++r<l;){var a=Gs(n[r]),h=t;if(a==="__proto__"||a==="constructor"||a==="prototype")return e;if(r!=o){var c=i[a];h=s?s(c,a,i):void 0,h===void 0&&(h=ot(c)?c:Ts(n[r+1])?[]:{})}Rs(i,a,h),i=i[a]}return e}var Vs=Ws,Ks=Vs;function Ls(e,n,t){return e==null?e:Ks(e,n,t)}var Hs=Ls;const Ot=pt(Hs);var Bs=function(e){var n=e.as,t=e.errors,s=e.name,r=e.message,l=e.render,o=function(f,w){if(f==null)return{};var v,m,b={},S=Object.keys(f);for(m=0;m<S.length;m++)w.indexOf(v=S[m])>=0||(b[v]=f[v]);return b}(e,["as","errors","name","message","render"]),i=en(),a=fe(t||i.formState.errors,s);if(!a)return null;var h=a.message,c=a.types,p=Object.assign({},o,{children:h||r});return u.isValidElement(n)?u.cloneElement(n,p):l?l({message:h||r,messages:c}):u.createElement(n||u.Fragment,p)};function re(e,n,t){let s=t.initialDeps??[],r,l=!0;function o(){var i,a,h;let c;t.key&&((i=t.debug)!=null&&i.call(t))&&(c=Date.now());const p=e();if(!(p.length!==s.length||p.some((v,m)=>s[m]!==v)))return r;s=p;let w;if(t.key&&((a=t.debug)!=null&&a.call(t))&&(w=Date.now()),r=n(...p),t.key&&((h=t.debug)!=null&&h.call(t))){const v=Math.round((Date.now()-c)*100)/100,m=Math.round((Date.now()-w)*100)/100,b=m/16,S=(C,x)=>{for(C=String(C);C.length<x;)C=" "+C;return C};console.info(`%câ± ${S(m,5)} /${S(v,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,t==null?void 0:t.key)}return t!=null&&t.onChange&&!(l&&t.skipInitialOnChange)&&t.onChange(r),l=!1,r}return o.updateDeps=i=>{s=i},o}function at(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const Us=(e,n)=>Math.abs(e-n)<1.01,Ys=(e,n,t)=>{let s;return function(...r){e.clearTimeout(s),s=e.setTimeout(()=>n.apply(this,r),t)}},ct=e=>{const{offsetWidth:n,offsetHeight:t}=e;return{width:n,height:t}},Zs=e=>e,Qs=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),s=[];for(let r=n;r<=t;r++)s.push(r);return s},Xs=(e,n)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;const r=o=>{const{width:i,height:a}=o;n({width:Math.round(i),height:Math.round(a)})};if(r(ct(t)),!s.ResizeObserver)return()=>{};const l=new s.ResizeObserver(o=>{const i=()=>{const a=o[0];if(a!=null&&a.borderBoxSize){const h=a.borderBoxSize[0];if(h){r({width:h.inlineSize,height:h.blockSize});return}}r(ct(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()});return l.observe(t,{box:"border-box"}),()=>{l.unobserve(t)}},ut={passive:!0},dt=typeof window>"u"?!0:"onscrollend"in window,Js=(e,n)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;let r=0;const l=e.options.useScrollendEvent&&dt?()=>{}:Ys(s,()=>{n(r,!1)},e.options.isScrollingResetDelay),o=c=>()=>{const{horizontal:p,isRtl:f}=e.options;r=p?t.scrollLeft*(f&&-1||1):t.scrollTop,l(),n(r,c)},i=o(!0),a=o(!1);t.addEventListener("scroll",i,ut);const h=e.options.useScrollendEvent&&dt;return h&&t.addEventListener("scrollend",a,ut),()=>{t.removeEventListener("scroll",i),h&&t.removeEventListener("scrollend",a)}},qs=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const s=n.borderBoxSize[0];if(s)return Math.round(s[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},er=(e,{adjustments:n=0,behavior:t},s)=>{var r,l;const o=e+n;(l=(r=s.scrollElement)==null?void 0:r.scrollTo)==null||l.call(r,{[s.options.horizontal?"left":"top"]:o,behavior:t})};class tr{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const s=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(r=>{r.forEach(l=>{const o=()=>{this._measureElement(l.target,l)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var r;(r=s())==null||r.disconnect(),t=null},observe:r=>{var l;return(l=s())==null?void 0:l.observe(r,{box:"border-box"})},unobserve:r=>{var l;return(l=s())==null?void 0:l.unobserve(r)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([s,r])=>{typeof r>"u"&&delete t[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Zs,rangeExtractor:Qs,onChange:()=>{},measureElement:qs,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var s,r;(r=(s=this.options).onChange)==null||r.call(s,this,t)},this.maybeNotify=re(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=l,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,s)=>{const r=new Map,l=new Map;for(let o=s-1;o>=0;o--){const i=t[o];if(r.has(i.lane))continue;const a=l.get(i.lane);if(a==null||i.end>a.end?l.set(i.lane,i):i.end<a.end&&r.set(i.lane,!0),r.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((o,i)=>o.end===i.end?o.index-i.index:o.end-i.end)[0]:void 0},this.getMeasurementOptions=re(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(t,s,r,l,o,i)=>(this.prevLanes!==void 0&&this.prevLanes!==i&&(this.lanesChangedFlag=!0),this.prevLanes=i,this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:s,scrollMargin:r,getItemKey:l,enabled:o,lanes:i}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=re(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:s,scrollMargin:r,getItemKey:l,enabled:o,lanes:i},a)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>t)for(const f of this.laneAssignments.keys())f>=t&&this.laneAssignments.delete(f);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(f=>{this.itemSizeCache.set(f.key,f.size)}));const h=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===t&&(this.lanesSettling=!1);const c=this.measurementsCache.slice(0,h),p=new Array(i).fill(void 0);for(let f=0;f<h;f++){const w=c[f];w&&(p[w.lane]=f)}for(let f=h;f<t;f++){const w=l(f),v=this.laneAssignments.get(f);let m,b;if(v!==void 0&&this.options.lanes>1){m=v;const k=p[m],y=k!==void 0?c[k]:void 0;b=y?y.end+this.options.gap:s+r}else{const k=this.options.lanes===1?c[f-1]:this.getFurthestMeasurement(c,f);b=k?k.end+this.options.gap:s+r,m=k?k.lane:f%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(f,m)}const S=a.get(w),C=typeof S=="number"?S:this.options.estimateSize(f),x=b+C;c[f]={index:f,start:b,size:C,end:x,key:w,lane:m},p[m]=f}return this.measurementsCache=c,c},{key:"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=re(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,s,r,l)=>this.range=t.length>0&&s>0?nr({measurements:t,outerSize:s,scrollOffset:r,lanes:l}):null,{key:"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=re(()=>{let t=null,s=null;const r=this.calculateRange();return r&&(t=r.startIndex,s=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,s]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,s]},(t,s,r,l,o)=>l===null||o===null?[]:t({startIndex:l,endIndex:o,overscan:s,count:r}),{key:"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const s=this.options.indexAttribute,r=t.getAttribute(s);return r?parseInt(r,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(t,s)=>{const r=this.indexFromElement(t),l=this.measurementsCache[r];if(!l)return;const o=l.key,i=this.elementsCache.get(o);i!==t&&(i&&this.observer.unobserve(i),this.observer.observe(t),this.elementsCache.set(o,t)),t.isConnected&&this.resizeItem(r,this.options.measureElement(t,s,this))},this.resizeItem=(t,s)=>{const r=this.measurementsCache[t];if(!r)return;const l=this.itemSizeCache.get(r.key)??r.size,o=s-l;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,o,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&(this.options.debug&&console.info("correction",o),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,s)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((s,r)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(r))});return}this._measureElement(t,void 0)},this.getVirtualItems=re(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,s)=>{const r=[];for(let l=0,o=t.length;l<o;l++){const i=t[l],a=s[i];r.push(a)}return r},{key:"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const s=this.getMeasurements();if(s.length!==0)return at(s[At(0,s.length-1,r=>at(s[r]).start,t)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const t=this.scrollElement.document.documentElement;return this.options.horizontal?t.scrollWidth-this.scrollElement.innerWidth:t.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(t,s,r=0)=>{if(!this.scrollElement)return 0;const l=this.getSize(),o=this.getScrollOffset();s==="auto"&&(s=t>=o+l?"end":"start"),s==="center"?t+=(r-l)/2:s==="end"&&(t-=l);const i=this.getMaxScrollOffset();return Math.max(Math.min(i,t),0)},this.getOffsetForIndex=(t,s="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const r=this.measurementsCache[t];if(!r)return;const l=this.getSize(),o=this.getScrollOffset();if(s==="auto")if(r.end>=o+l-this.options.scrollPaddingEnd)s="end";else if(r.start<=o+this.options.scrollPaddingStart)s="start";else return[o,"start"];if(s==="end"&&t===this.options.count-1)return[this.getMaxScrollOffset(),s];const i=s==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(i,s,r.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:s="start",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,s),{adjustments:void 0,behavior:r})},this.scrollToIndex=(t,{align:s="auto",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1)),this.currentScrollToIndex=t;let l=0;const o=10,i=h=>{if(!this.targetWindow)return;const c=this.getOffsetForIndex(t,h);if(!c){console.warn("Failed to get offset for index:",t);return}const[p,f]=c;this._scrollToOffset(p,{adjustments:void 0,behavior:r}),this.targetWindow.requestAnimationFrame(()=>{const w=()=>{if(this.currentScrollToIndex!==t)return;const v=this.getScrollOffset(),m=this.getOffsetForIndex(t,f);if(!m){console.warn("Failed to get offset for index:",t);return}Us(m[0],v)||a(f)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(w):w()})},a=h=>{this.targetWindow&&this.currentScrollToIndex===t&&(l++,l<o?(this.options.debug&&console.info("Schedule retry",l,o),this.targetWindow.requestAnimationFrame(()=>i(h))):console.warn(`Failed to scroll to index ${t} after ${o} attempts.`))};i(s)},this.scrollBy=(t,{behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var t;const s=this.getMeasurements();let r;if(s.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((t=s[s.length-1])==null?void 0:t.end)??0;else{const l=Array(this.options.lanes).fill(null);let o=s.length-1;for(;o>=0&&l.some(i=>i===null);){const i=s[o];l[i.lane]===null&&(l[i.lane]=i.end),o--}r=Math.max(...l.filter(i=>i!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:s,behavior:r})=>{this.options.scrollToFn(t,{behavior:r,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(n)}}const At=(e,n,t,s)=>{for(;e<=n;){const r=(e+n)/2|0,l=t(r);if(l<s)e=r+1;else if(l>s)n=r-1;else return r}return e>0?e-1:0};function nr({measurements:e,outerSize:n,scrollOffset:t,lanes:s}){const r=e.length-1,l=a=>e[a].start;if(e.length<=s)return{startIndex:0,endIndex:r};let o=At(0,r,l,t),i=o;if(s===1)for(;i<r&&e[i].end<t+n;)i++;else if(s>1){const a=Array(s).fill(0);for(;i<r&&a.some(c=>c<t+n);){const c=e[i];a[c.lane]=c.end,i++}const h=Array(s).fill(t+n);for(;o>=0&&h.some(c=>c>=t);){const c=e[o];h[c.lane]=c.start,o--}o=Math.max(0,o-o%s),i=Math.min(r,i+(s-1-i%s))}return{startIndex:o,endIndex:i}}const ht=typeof document<"u"?u.useLayoutEffect:u.useEffect;function sr({useFlushSync:e=!0,...n}){const t=u.useReducer(()=>({}),{})[1],s={...n,onChange:(l,o)=>{var i;e&&o?tn.flushSync(t):t(),(i=n.onChange)==null||i.call(n,l,o)}},[r]=u.useState(()=>new tr(s));return r.setOptions(s),ht(()=>r._didMount(),[]),ht(()=>r._willUpdate()),r}function ft(e){return sr({observeElementRect:Xs,observeElementOffset:Js,scrollToFn:er,...e})}var rr=({columns:e,rows:n=10})=>{const t=Array.from({length:n},(r,l)=>l),s=e.length;return d.jsxs("div",{className:"bg-ui-bg-subtle size-full",children:[d.jsx("div",{className:"bg-ui-bg-base border-b p-4",children:d.jsx("div",{className:"bg-ui-button-neutral h-7 w-[116px] animate-pulse rounded-md"})}),d.jsxs("div",{className:"bg-ui-bg-subtle size-full overflow-auto",children:[d.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${s}, 1fr)`},children:e.map((r,l)=>d.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:d.jsx(Je,{className:"h-[14px] w-[164px]"})},l))}),d.jsx("div",{children:t.map((r,l)=>d.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${s}, 1fr)`},children:e.map((o,i)=>d.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:d.jsx(Je,{className:"h-[14px] w-[164px]"})},i))},l))})]})]})};function lr(e,n){typeof e=="function"?e(n):e&&"current"in e&&(e.current=n)}var ve=(...e)=>n=>{e.forEach(t=>lr(t,n))},zt=u.createContext(null),Pe=()=>{const e=u.useContext(zt);if(!e)throw new Error("useDataGridContext must be used within a DataGridContextProvider");return e};function Nt(e){return`${e.row}:${e.col}`}function Ft(e,n){return n?e.row===n.row&&e.col===n.col:!1}var ir=[".",","];function Pt(e){return ir.includes(e.key)&&e.ctrlKey&&e.altKey}var or=/^.$/u,ar=/^[0-9]$/u,we=({context:e})=>{const{register:n,control:t,anchor:s,setIsEditing:r,setSingleRange:l,setIsSelecting:o,setRangeEnd:i,getWrapperFocusHandler:a,getWrapperMouseOverHandler:h,getInputChangeHandler:c,getIsCellSelected:p,getIsCellDragSelected:f,getCellMetadata:w}=Pe(),{rowIndex:v,columnIndex:m}=e,b=u.useMemo(()=>({row:v,col:m}),[v,m]),{id:S,field:C,type:x,innerAttributes:k,inputAttributes:y}=u.useMemo(()=>w(b),[b,w]),[O,T]=u.useState(!0),$=u.useRef(null),P=u.useRef(null),U=u.useCallback(E=>{if(E.preventDefault(),E.stopPropagation(),E.detail===2&&P.current){T(!1),P.current.focus();return}if(E.shiftKey&&b.col===(s==null?void 0:s.col)){i(b);return}$.current&&(l(b),o(!0),$.current.focus())},[b,s,i,l,o]),Y=u.useCallback(E=>{var R;if(E.preventDefault(),E.stopPropagation(),E.detail===2){(R=P.current)==null||R.focus();return}if(E.shiftKey){i(b);return}$.current&&(l(b),o(!0),$.current.focus())},[o,l,i,b]),ee=u.useCallback(()=>{T(!0),r(!1)},[r]),te=u.useCallback(()=>{T(!1),r(!0)},[r]),ne=u.useCallback(E=>{switch(x){case"togglable-number":case"number":return ar.test(E);case"text":return or.test(E);default:return!1}},[x]),Z=u.useCallback(E=>{var R;if(!(!P.current||!ne(E.key)||!O)&&!(E.key.toLowerCase()==="z"&&(E.ctrlKey||E.metaKey))&&!(E.key.toLowerCase()==="c"&&(E.ctrlKey||E.metaKey))&&!(E.key.toLowerCase()==="v"&&(E.ctrlKey||E.metaKey))&&E.key!=="Enter"&&!Pt(E.nativeEvent)){if(P.current.focus(),T(!1),P.current instanceof HTMLInputElement){P.current.value="";const Q=(R=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:R.set;Q==null||Q.call(P.current,E.key);const X=new Event("input",{bubbles:!0});P.current.dispatchEvent(X)}E.stopPropagation(),E.preventDefault()}},[O,ne]),H=u.useMemo(()=>s?Ft(b,s):!1,[s,b]),L=u.useMemo(()=>x==="boolean",[x]);u.useEffect(()=>{var E,R;H&&!((E=$.current)!=null&&E.contains(document.activeElement))&&((R=$.current)==null||R.focus())},[H]);const se={container:{field:C,isAnchor:H,isSelected:p(b),isDragSelected:f(b),showOverlay:L?!1:O,innerProps:{ref:$,onMouseOver:h(b),onMouseDown:x==="boolean"?Y:void 0,onKeyDown:Z,onFocus:a(b),...k},overlayProps:{onMouseDown:U}},input:{ref:P,onBlur:ee,onFocus:te,onChange:c(C),...y}};return{id:S,field:C,register:n,control:t,renderProps:se}},oe=({context:e})=>{const{errors:n,getCellErrorMetadata:t,navigateToField:s}=Pe(),{rowIndex:r,columnIndex:l}=e,{accessor:o,field:i}=u.useMemo(()=>t({row:r,col:l}),[r,l,t]),a=o&&l===0?fe(n,o):void 0,h=[];function c(f,w){if(f)if(cr(f)){const v=f.message,m=()=>s(w);v&&h.push({message:v,to:m})}else Object.keys(f).forEach(v=>{const m=f[v],b=`${w}.${v}`;m&&typeof m=="object"&&c(m,b)})}a&&o&&c(a,o);const p=i?fe(n,i):void 0;return{errors:n,rowErrors:h,cellError:p}};function cr(e){return typeof e=="object"&&"message"in e&&"type"in e}var le=class{constructor({fields:e,prev:n,next:t,setter:s}){K(this,"_fields"),K(this,"_prev"),K(this,"_next"),K(this,"_setter"),this._fields=e,this._prev=n,this._next=t,this._setter=s}execute(e=!1){this._setter(this._fields,this._next,e)}undo(){this._setter(this._fields,this._prev,!0)}redo(){this.execute(!0)}},ur=class{constructor(e,n,t=!1){K(this,"multiColumnSelection"),K(this,"cells"),K(this,"rowAccessors",[]),K(this,"columnAccessors",[]),this.multiColumnSelection=t,this.cells=this._populateCells(e,n),this.rowAccessors=this._computeRowAccessors(),this.columnAccessors=this._computeColumnAccessors()}_computeRowAccessors(){return this.cells.map((e,n)=>this.getRowAccessor(n))}_computeColumnAccessors(){return this.cells.length===0?[]:this.cells[0].map((e,n)=>this.getColumnAccessor(n))}getFirstNavigableCell(){for(let e=0;e<this.cells.length;e++)for(let n=0;n<this.cells[0].length;n++)if(this.cells[e][n]!==null)return{row:e,col:n};return null}getFieldsInRow(e){const n=[];return e<0||e>=this.cells.length||this.cells[e].forEach(t=>{t!==null&&n.push(t.field)}),n}getFieldsInSelection(e,n){var i;const t=[];if(!e||!n)return t;if(!this.multiColumnSelection&&e.col!==n.col)throw new Error("Selection must be in the same column when multiColumnSelection is disabled");const s=Math.min(e.row,n.row),r=Math.max(e.row,n.row),l=this.multiColumnSelection?Math.min(e.col,n.col):e.col,o=this.multiColumnSelection?Math.max(e.col,n.col):e.col;for(let a=s;a<=r;a++)for(let h=l;h<=o;h++)this._isValidPosition(a,h)&&this.cells[a][h]!==null&&t.push((i=this.cells[a][h])==null?void 0:i.field);return t}getCellField(e){var n;return this._isValidPosition(e.row,e.col)&&((n=this.cells[e.row][e.col])==null?void 0:n.field)||null}getCellType(e){var n;return this._isValidPosition(e.row,e.col)&&((n=this.cells[e.row][e.col])==null?void 0:n.type)||null}getIsCellSelected(e,n,t){if(!e||!n||!t)return!1;if(!this.multiColumnSelection&&n.col!==t.col)throw new Error("Selection must be in the same column when multiColumnSelection is disabled");const s=Math.min(n.row,t.row),r=Math.max(n.row,t.row),l=this.multiColumnSelection?Math.min(n.col,t.col):n.col,o=this.multiColumnSelection?Math.max(n.col,t.col):n.col;return e.row>=s&&e.row<=r&&e.col>=l&&e.col<=o}toggleColumn(e,n){e<0||e>=this.cells[0].length||this.cells.forEach((t,s)=>{const r=t[e];r&&(this.cells[s][e]={...r,enabled:n})})}toggleRow(e,n){e<0||e>=this.cells.length||this.cells[e].forEach((t,s)=>{t&&(this.cells[e][s]={...t,enabled:n})})}getCoordinatesByField(e){if(this.rowAccessors.length===1){const n=this.columnAccessors.indexOf(e);return n===-1?null:{row:0,col:n}}for(let n=0;n<this.rowAccessors.length;n++){const t=this.rowAccessors[n];if(t!==null&&e.startsWith(t))for(let s=0;s<this.columnAccessors.length;s++){const r=this.columnAccessors[s];if(r===null)continue;if(`${t}.${r}`===e)return{row:n,col:s}}}return null}getRowAccessor(e){if(e<0||e>=this.cells.length)return null;const t=this.cells[e].filter(l=>l!==null).map(l=>l.field.split("."));if(t.length===0)return null;let s=t[0];for(const l of t)if(s=s.filter((o,i)=>l[i]===o),s.length===0)break;const r=s.join(".");return r||null}getColumnAccessor(e){if(e<0||e>=this.cells[0].length)return null;const n=this.cells.map((r,l)=>{const o=r[e];if(!o)return null;const i=this.getRowAccessor(l);return i&&o.field.startsWith(i+".")?o.field.slice(i.length+1):null}).filter(r=>r!==null);if(n.length===0)return null;const t=n[0];return n.every(r=>r===t)?t:null}getValidMovement(e,n,t,s=!1){var o;const[r,l]=this._getDirectionDeltas(t);if(s)return this._getLastValidCellInDirection(e,n,r,l);{let i=e+r,a=n+l;for(;this._isValidPosition(i,a);){if(this.cells[i][a]!==null&&((o=this.cells[i][a])==null?void 0:o.enabled)!==!1)return{row:i,col:a};i+=r,a+=l}return{row:e,col:n}}}_isValidPosition(e,n,t){return t||(t=this.cells),e>=0&&e<t.length&&n>=0&&n<t[0].length}_getDirectionDeltas(e){switch(e){case"ArrowUp":return[-1,0];case"ArrowDown":return[1,0];case"ArrowLeft":return[0,-1];case"ArrowRight":return[0,1];default:return[0,0]}}_getLastValidCellInDirection(e,n,t,s){let r=e,l=n,o=e,i=n;for(;this._isValidPosition(r+t,l+s);)r+=t,l+=s,this.cells[r][l]!==null&&(o=r,i=l);return{row:o,col:i}}_populateCells(e,n){const t=Array.from({length:e.length},()=>Array(n.length).fill(null));return e.forEach((s,r)=>{n.forEach((l,o)=>{if(!this._isValidPosition(r,o,t))return;const{name:i,field:a,type:h,...c}=l.meta,p={row:s,column:{...l,meta:c}},f=a?a(p):null;!f||!h||(t[r][o]={field:f,type:h,enabled:!0})})}),t}},dr=class{constructor(e){K(this,"container"),this.container=e}getInput(e){var s;const n=this._getCellId(e),t=(s=this.container)==null?void 0:s.querySelector(`[data-cell-id="${n}"]`);return t||null}getInputByField(e){var t;const n=(t=this.container)==null?void 0:t.querySelector(`[data-field="${e}"]`);return n||null}getCoordinatesByField(e){var l;const n=(l=this.container)==null?void 0:l.querySelector(`[data-field="${e}"][data-cell-id]`);if(!n)return null;const t=n.getAttribute("data-cell-id");if(!t)return null;const[s,r]=t.split(":").map(o=>parseInt(o,10));return isNaN(s)||isNaN(r)?null:{row:s,col:r}}getContainer(e){var s;const n=this._getCellId(e),t=(s=this.container)==null?void 0:s.querySelector(`[data-container-id="${n}"]`);return t||null}_getCellId(e){return Nt(e)}},he=class{constructor({prev:e,next:n,setter:t}){K(this,"_prev"),K(this,"_next"),K(this,"_setter"),this._prev=e,this._next=n,this._setter=t}execute(){this._setter(this._next)}undo(){this._setter(this._prev)}redo(){this.execute()}},hr=({matrix:e,anchor:n,rangeEnd:t,setRangeEnd:s,isDragging:r,setIsDragging:l,isSelecting:o,setIsSelecting:i,setSingleRange:a,dragEnd:h,setDragEnd:c,setValue:p,execute:f,multiColumnSelection:w})=>{const v=u.useCallback(y=>O=>{a(y)},[a]),m=u.useCallback(y=>O=>{if(O.stopPropagation(),O.preventDefault(),O.shiftKey){s(y);return}i(!0),a(y)},[i,s,a]),b=u.useCallback(y=>{if(!(!r&&!o))return O=>{(n==null?void 0:n.col)!==y.col&&!w||(o?s(y):c(y))}},[n==null?void 0:n.col,r,o,c,s,w]),S=u.useCallback(y=>(O,T)=>{const $=new he({next:O,prev:T,setter:P=>{p(y,P,{shouldDirty:!0,shouldTouch:!0})}});f($)},[p,f]),C=u.useCallback(y=>{l(!0)},[l]),x=u.useCallback(y=>!y||!n||!t?!1:e.getIsCellSelected(y,n,t),[n,t,e]),k=u.useCallback(y=>!y||!n||!h?!1:e.getIsCellSelected(y,n,h),[n,h,e]);return{getWrapperFocusHandler:v,getOverlayMouseDownHandler:m,getWrapperMouseOverHandler:b,getInputChangeHandler:S,getIsCellSelected:x,getIsCellDragSelected:k,onDragToFillStart:C}},fr=({matrix:e})=>{const n=u.useCallback(s=>{const{row:r,col:l}=s,o=Nt(s),i=e.getCellField(s),a=e.getCellType(s);if(!i||!a)throw new Error(`'field' or 'type' is null for cell ${o}`);return{id:o,field:i,type:a,inputAttributes:{"data-row":r,"data-col":l,"data-cell-id":o,"data-field":i},innerAttributes:{"data-container-id":o}}},[e]),t=u.useCallback(s=>{const r=e.getRowAccessor(s.row),l=e.getCellField(s);return{accessor:r,field:l}},[e]);return{getCellMetadata:n,getCellErrorMetadata:t}},mr=({matrix:e,form:n})=>{const[t,s]=u.useState(null),{getValues:r,setValue:l}=n,o=u.useCallback(a=>{if(!a)return null;const h=e.getCellField(a);if(!h)return null;const c=r(h);s(p=>(p==null?void 0:p.field)===h?p:{field:h,value:c})},[r,e]),i=u.useCallback(()=>{if(!t)return;const{field:a,value:h}=t;requestAnimationFrame(()=>{l(a,h)})},[l,t]);return{createSnapshot:o,restoreSnapshot:i}},pr=({matrix:e,anchor:n,rangeEnd:t,isEditing:s,getSelectionValues:r,setSelectionValues:l,execute:o})=>{const i=u.useCallback(h=>{var w;if(s||!n||!t)return;h.preventDefault();const c=e.getFieldsInSelection(n,t),f=r(c).map(v=>typeof v=="object"&&v!==null?JSON.stringify(v):`${v}`??"").join("	");(w=h.clipboardData)==null||w.setData("text/plain",f)},[s,n,t,e,r]),a=u.useCallback(h=>{var m;if(s||!n||!t)return;h.preventDefault();const c=(m=h.clipboardData)==null?void 0:m.getData("text/plain");if(!c)return;const p=c.split("	"),f=e.getFieldsInSelection(n,t),w=r(f),v=new le({fields:f,next:p,prev:w,setter:l});o(v)},[s,n,t,e,r,l,o]);return{handleCopyEvent:i,handlePasteEvent:a}};function gr(e,n){const t=e.getAllLeafColumns(),s=t.map(a=>({id:a.id,name:br(a),checked:a.getIsVisible(),disabled:!a.getCanHide()})),r=u.useCallback(a=>h=>{const c=t[a];c.getCanHide()&&(n.toggleColumn(a,h),c.toggleVisibility(h))},[t,n]),l=u.useCallback(()=>{e.setColumnVisibility({})},[e]),i=s.filter(a=>!a.disabled).length===0;return{columnOptions:s,handleToggleColumn:r,handleResetColumns:l,isDisabled:i}}function br(e){const n=e.columnDef.id,t=e.columnDef.enableHiding,s=e==null?void 0:e.columnDef.meta;if(!n)throw new Error("Column is missing an id, which is a required field. Please provide an id for the column.");return!(s!=null&&s.name)&&t&&console.warn(`Column "${n}" does not have a name. You should add a name to the column definition. Falling back to the column id.`),(s==null?void 0:s.name)||n}var rl=({duplicateOf:e})=>{const{control:n}=Pe();return{watchedValue:rn({control:n,name:e})}},vr=(e,n,t)=>{const[s,r]=u.useState(!1),[l,o]=u.useState(null),{flatRows:i}=n.getRowModel(),a=n.getAllFlatColumns(),h=Rt(t),c=h.length,{rowsWithErrors:p,columnsWithErrors:f}=u.useMemo(()=>{const v=new Set,m=new Set;return h.forEach(b=>{const S=e.rowAccessors.findIndex(x=>x&&(b===x||b.startsWith(`${x}.`)));S!==-1&&v.add(S);const C=e.columnAccessors.findIndex(x=>x&&(b===x||b.endsWith(`.${x}`)));C!==-1&&m.add(C)}),{rowsWithErrors:v,columnsWithErrors:m}},[h,e.rowAccessors,e.columnAccessors]),w=u.useCallback((v,m,b,S)=>{if(s)l&&(b(l.rows),S(l.columns));else{o({rows:{...v},columns:{...m}});const C=i.map((k,y)=>p.has(y)?void 0:y).filter(k=>k!==void 0),x=a.map((k,y)=>!f.has(y)&&y!==0?k.id:void 0).filter(k=>k!==void 0);b(C.reduce((k,y)=>({...k,[y]:!1}),{})),S(x.reduce((k,y)=>({...k,[y]:!1}),{}))}r(C=>!C)},[s,l,i,a,p,f]);return{errorCount:c,isHighlighted:s,toggleErrorHighlighting:w}};function Rt(e,n=[]){return typeof e!="object"||e===null?[]:"message"in e&&"type"in e?[n.join(".")]:Object.entries(e).flatMap(([t,s])=>Rt(s,[...n,t]))}var wr=({matrix:e,form:n,anchor:t})=>{const{getValues:s,reset:r}=n,l=u.useCallback(i=>{if(!i.length)return[];const a=s();return i.map(h=>h.split(".").reduce((c,p)=>c==null?void 0:c[p],a))},[s]),o=u.useCallback(async(i,a,h)=>{if(!i.length||!t)return;const c=e.getCellType(t);if(!c)return;const p=Mr(a,c),f=s();i.forEach((w,v)=>{if(!w)return;const m=v%a.length,b=p[m];Sr(f,w,b,c,h)}),r(f,{keepDirty:!0,keepTouched:!0,keepDefaultValues:!0})},[e,t,s,r]);return{getSelectionValues:l,setSelectionValues:o}};function xr(e){if(typeof e=="number")return e;const n=Number(e);if(isNaN(n))throw new Error(`String "${e}" cannot be converted to number.`);return n}function Cr(e){if(typeof e=="boolean")return e;if(typeof e>"u"||e===null)return!1;const n=e.toLowerCase();if(n==="true"||n==="false")return n==="true";throw new Error(`String "${e}" cannot be converted to boolean.`)}function yr(e){return typeof e>"u"||e===null?"":String(e)}function _r(e){let n=e;if(typeof n=="string")try{n=JSON.parse(n)}catch{throw new Error(`String "${e}" cannot be converted to object.`)}return n}function Sr(e,n,t,s,r){if(s!=="togglable-number"){Ot(e,n,t);return}Er(e,n,t,r)}function Er(e,n,t,s){const r=Es(e,n),{disabledToggle:l}=r,o=c=>l&&c===""?0:c,i=c=>l?!0:c!==""&&c!=null,a=o(t.quantity),h=s?l?!0:t.checked:i(a);Ot(e,n,{...r,quantity:a,checked:h})}function Mr(e,n){switch(n){case"number":return e.map(t=>t===""?t:t==null?"":xr(t));case"togglable-number":return e.map(_r);case"boolean":return e.map(Cr);case"text":return e.map(yr);default:throw new Error(`Unsupported target type "${n}".`)}}var kr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ir=["ArrowUp","ArrowDown"],jr=({containerRef:e,matrix:n,anchor:t,rangeEnd:s,isEditing:r,setTrapActive:l,scrollToCoordinates:o,setSingleRange:i,setRangeEnd:a,onEditingChangeHandler:h,getValues:c,setValue:p,execute:f,undo:w,redo:v,queryTool:m,getSelectionValues:b,setSelectionValues:S,restoreSnapshot:C,createSnapshot:x})=>{const k=u.useCallback(g=>{if(!t)return;const _=n.getCellType(t);if(r&&_!=="boolean")return;const j=Ir.includes(g.key)?"vertical":"horizontal",M=j==="horizontal"?t:g.shiftKey?s:t,D=j==="horizontal"?i:g.shiftKey?a:i;if(!M)return;const{row:A,col:F}=M,z=G=>{g.preventDefault(),g.stopPropagation(),o(G,j),D(G)},J=n.getValidMovement(A,F,g.key,g.metaKey||g.ctrlKey);z(J)},[r,t,s,o,i,a,n]),y=u.useCallback(g=>{if(!t)return;g.preventDefault(),g.stopPropagation();const{row:_,col:j}=t,M=g.shiftKey?"ArrowLeft":"ArrowRight",D="horizontal",A=n.getValidMovement(_,j,M,g.metaKey||g.ctrlKey);o(A,D),i(A)},[t,o,i,n]),O=u.useCallback(g=>{if(g.preventDefault(),g.shiftKey){v();return}w()},[v,w]),T=u.useCallback(g=>{const _=s??g,j=n.getFieldsInSelection(g,_),M=b(j),D=M.every(z=>z===!0),A=Array.from({length:M.length},()=>!D),F=new le({fields:j,next:A,prev:M,setter:S});f(F)},[s,n,b,S,f]),$=u.useCallback(g=>{const _=n.getCellField(g),j=m==null?void 0:m.getInput(g);if(!_||!j)return;x(g);const M=c(_),D="",A=new he({next:D,prev:M,setter:F=>{p(_,F,{shouldDirty:!0,shouldTouch:!0})}});f(A),j.focus()},[n,m,c,f,p,x]),P=u.useCallback(g=>{const _=n.getCellField(g),j=m==null?void 0:m.getInput(g);if(!_||!j)return;x(g);const M=c(_);let D=M.checked;M.disabledToggle||(D=!1);const A={...M,quantity:"",checked:D},F=new he({next:A,prev:M,setter:z=>{p(_,z,{shouldDirty:!0,shouldTouch:!0})}});f(F),j.focus()},[n,m,c,f,p,x]),U=u.useCallback(g=>{if(!t||r)return;g.preventDefault();const _=n.getCellType(t);if(_)switch(_){case"boolean":T(t);break;case"togglable-number":P(t);break;case"number":case"text":$(t);break}},[t,r,n,T,$,P]),Y=u.useCallback((g,_)=>{const j=g.shiftKey?"ArrowUp":"ArrowDown",M=n.getValidMovement(_.row,_.col,j,!1);if(_.row!==M.row||_.col!==M.col)i(M),o(M,"vertical");else{const D=m==null?void 0:m.getContainer(_);D==null||D.focus()}h(!1)},[m,n,o,i,h]),ee=u.useCallback(g=>{const _=m==null?void 0:m.getInput(g);_&&(_.focus(),h(!0))},[m,h]),te=u.useCallback((g,_)=>{if(r){Y(g,_);return}ee(_)},[Y,ee,r]),ne=u.useCallback((g,_)=>{const j=n.getCellField(_);if(!j)return;const M=c(j);let D;typeof M=="boolean"?D=!M:D=!0;const A=new he({next:D,prev:M,setter:F=>{p(j,F,{shouldDirty:!0,shouldTouch:!0})}});f(A),Y(g,_)},[f,c,Y,n,p]),Z=u.useCallback(g=>{if(!t)return;switch(g.preventDefault(),n.getCellType(t)){case"togglable-number":case"text":case"number":te(g,t);break;case"boolean":{ne(g,t);break}}},[t,n,te,ne]),H=u.useCallback((g,_)=>{const j=n.getFieldsInSelection(g,_),M=b(j),D=M.map(F=>({...F,quantity:"",checked:F.disableToggle?F.checked:!1})),A=new le({fields:j,next:D,prev:M,setter:S});f(A)},[n,b,S,f]),L=u.useCallback((g,_)=>{const j=n.getFieldsInSelection(g,_),M=b(j),D=Array.from({length:M.length},()=>""),A=new le({fields:j,next:D,prev:M,setter:S});f(A)},[n,b,S,f]),se=u.useCallback((g,_)=>{const j=n.getFieldsInSelection(g,_),M=b(j),D=Array.from({length:M.length},()=>!1),A=new le({fields:j,next:D,prev:M,setter:S});f(A)},[f,b,n,S]),E=u.useCallback(g=>{if(!t||!s||r)return;g.preventDefault();const _=n.getCellType(t);if(_)switch(_){case"text":case"number":L(t,s);break;case"boolean":se(t,s);break;case"togglable-number":H(t,s);break}},[t,s,r,n,L,se,H]),R=u.useCallback(g=>{if(!t||!r)return;g.preventDefault(),g.stopPropagation(),C();const _=m==null?void 0:m.getContainer(t);_==null||_.focus()},[m,r,t,C]),Q=u.useCallback(g=>{if(!e||r)return;const _=Dr(e),j=M=>{M&&(l(!1),M.focus())};switch(g.key){case".":j(_.cancel);break;case",":j(_.shortcuts);break}},[r,l,e]);return{handleKeyDownEvent:u.useCallback(g=>{if(kr.includes(g.key)){k(g);return}if(g.key==="z"&&(g.metaKey||g.ctrlKey)){O(g);return}if(g.key===" "){U(g);return}if(g.key==="Delete"||g.key==="Backspace"){E(g);return}if(g.key==="Enter"){Z(g);return}if(g.key==="Escape"){R(g);return}if(g.key==="Tab"){y(g);return}},[R,k,O,U,Z,E,y]),handleSpecialFocusKeys:Q}};function Dr(e){const n=Array.from(document.querySelectorAll("[tabindex], a, button, input, select, textarea")),t=n.indexOf(e.current),s=t>0?n[t-1]:null;let r=null;for(let l=t+1;l<n.length;l++)if(!e.current.contains(n[l])){r=n[l];break}return{shortcuts:s,cancel:r}}var Or=({matrix:e,anchor:n,dragEnd:t,setDragEnd:s,isDragging:r,setIsDragging:l,setRangeEnd:o,setIsSelecting:i,getSelectionValues:a,setSelectionValues:h,execute:c})=>{const p=u.useCallback(()=>{if(!r||!n||!t)return;const w=e.getFieldsInSelection(n,t),v=e.getCellField(n);if(!v||!w.length)return;const m=a([v]),b=w.filter(k=>k!==v),S=a(b),C=Array.from({length:S.length},()=>m[0]),x=new le({fields:b,prev:S,next:C,setter:h});c(x),l(!1),s(null),o(t)},[r,n,t,e,a,h,c,l,s,o]);return{handleMouseUpEvent:u.useCallback(()=>{p(),i(!1)},[p,i])}},Ar=({matrix:e,anchor:n,visibleColumns:t,visibleRows:s,columnVirtualizer:r,rowVirtualizer:l,setColumnVisibility:o,flatColumns:i,queryTool:a,setSingleRange:h})=>{const c=u.useCallback((f,w)=>{if(!n)return;const{row:v,col:m}=f,{row:b,col:S}=n,C=v>=b?"down":"up",x=m>=S?"right":"left";let k=C==="down"?v+1:v-1;s[k]===void 0&&(k=v);let y=x==="right"?m+1:m-1;t[y]===void 0&&(y=m);const O={align:"auto",behavior:"auto"};(w==="horizontal"||w==="both")&&r.scrollToIndex(y,O),(w==="vertical"||w==="both")&&l.scrollToIndex(k,O)},[n,r,s,l,t]),p=u.useCallback(f=>{const w=e.getCoordinatesByField(f);if(!w)return;const v=i[w.col];o(m=>({...m,[v.id]:!0})),requestAnimationFrame(()=>{c(w,"both"),h(w)}),requestAnimationFrame(()=>{const m=a==null?void 0:a.getInput(w);m&&m.focus()})},[e,i,o,c,h,a]);return{scrollToCoordinates:c,navigateToField:p}},zr=e=>{const n=u.useRef(null);return u.useEffect(()=>{e.current&&(n.current=new dr(e.current))},[e]),n.current},$t=({rowErrors:e})=>{const n=e?e.length:0;return!e||n<=0?null:d.jsx(ze,{content:d.jsx("ul",{className:"flex flex-col gap-y-3",children:e.map((t,s)=>d.jsx(Nr,{error:t},s))}),delayDuration:0,children:d.jsx(sn,{color:"red",size:"2xsmall",className:"cursor-default",children:n})})},Nr=({error:e})=>{const{t:n}=ie();return d.jsxs("li",{className:"txt-compact-small flex flex-col items-start",children:[e.message,d.jsx("button",{type:"button",onClick:e.to,className:"text-ui-fg-interactive hover:text-ui-fg-interactive-hover transition-fg",children:n("dataGrid.errors.fixError")})]})},xe=({isAnchor:e,isSelected:n,isDragSelected:t,field:s,showOverlay:r,placeholder:l,innerProps:o,overlayProps:i,children:a,errors:h,rowErrors:c,outerComponent:p})=>{const w=!!fe(h,s);return d.jsxs("div",{className:"group/container relative size-full",children:[d.jsxs("div",{className:q("bg-ui-bg-base group/cell relative flex size-full items-center gap-x-2 px-4 py-2.5 outline-none",{"bg-ui-tag-red-bg text-ui-tag-red-text":w&&!e&&!n&&!t,"ring-ui-bg-interactive ring-2 ring-inset":e,"bg-ui-bg-highlight [&:has([data-field]:focus)]:bg-ui-bg-base":n||e,"bg-ui-bg-subtle":t&&!e}),tabIndex:-1,...o,children:[d.jsx(Bs,{name:s,errors:h,render:({message:v})=>d.jsx("div",{className:"flex items-center justify-center",children:d.jsx(ze,{content:v,delayDuration:0,children:d.jsx(gt,{className:"text-ui-tag-red-icon z-[3]"})})})}),d.jsx("div",{className:"relative z-[1] flex size-full items-center justify-center",children:d.jsx(Fr,{isAnchor:e,placeholder:l,children:a})}),d.jsx($t,{rowErrors:c}),r&&d.jsx("div",{...i,"data-cell-overlay":"true",className:"absolute inset-0 z-[2]"})]}),p]})},Fr=({isAnchor:e,placeholder:n,children:t})=>!e&&n?n:t,Pr=({context:e,disabled:n})=>{const{field:t,control:s,renderProps:r}=we({context:e}),l=oe({context:e}),{container:o,input:i}=r;return d.jsx(be,{control:s,name:t,render:({field:a})=>d.jsx(xe,{...o,...l,children:d.jsx(Rr,{field:a,inputProps:i,disabled:n})})})},Rr=({field:e,inputProps:n,disabled:t})=>{const{ref:s,value:r,onBlur:l,name:o,disabled:i}=e,{ref:a,onBlur:h,onChange:c,onFocus:p,...f}=n,w=ve(s,a);return d.jsx(jn,{disabled:t||i,name:o,checked:r,onCheckedChange:v=>c(v===!0,r),onFocus:p,onBlur:()=>{l(),h()},ref:w,tabIndex:-1,...f})},De=({context:e,code:n})=>{const{field:t,control:s,renderProps:r}=we({context:e}),l=oe({context:e}),{container:o,input:i}=r,a=Xt[n.toUpperCase()];return d.jsx(be,{control:s,name:t,render:({field:h})=>d.jsx(xe,{...o,...l,children:d.jsx($r,{field:h,inputProps:i,currencyInfo:a})})})},$r=({field:e,inputProps:n,currencyInfo:t})=>{const{value:s,onChange:r,onBlur:l,ref:o,...i}=e,{ref:a,onBlur:h,onFocus:c,onChange:p,...f}=n,w=u.useCallback(C=>{const x=typeof C=="number"?C.toString():C||"";return an({value:x,decimalScale:t.decimal_digits,disableGroupSeparators:!0,decimalSeparator:"."})},[t]),[v,m]=u.useState(s||""),b=(C,x,k)=>{if(!C){m("");return}m(C)};u.useEffect(()=>{let C=s;isNaN(Number(s))||(C=w(C)),m(C)},[s,w]);const S=ve(a,o);return d.jsxs("div",{className:"relative flex size-full items-center",children:[d.jsx("span",{className:"txt-compact-small text-ui-fg-muted pointer-events-none absolute left-0 w-fit min-w-4","aria-hidden":!0,children:t.symbol_native}),d.jsx(cn,{...i,...f,ref:S,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-8 text-right outline-none",value:v||void 0,onValueChange:b,formatValueOnBlur:!0,onBlur:()=>{l(),h(),p(v,s)},onFocus:c,decimalScale:t.decimal_digits,decimalsLimit:t.decimal_digits,autoComplete:"off",tabIndex:-1})]})},Tr=({context:e,...n})=>{const{field:t,control:s,renderProps:r}=we({context:e}),l=oe({context:e}),{container:o,input:i}=r;return d.jsx(be,{control:s,name:t,render:({field:a})=>d.jsx(xe,{...o,...l,children:d.jsx(Gr,{field:a,inputProps:i,...n})})})},Gr=({field:e,inputProps:n,...t})=>{const{ref:s,value:r,onChange:l,onBlur:o,...i}=e,{ref:a,onChange:h,onBlur:c,onFocus:p,...f}=n,[w,v]=u.useState(r);u.useEffect(()=>{v(r)},[r]);const m=ve(a,s);return d.jsx("div",{className:"size-full",children:d.jsx("input",{ref:m,value:w,onChange:b=>v(b.target.value),onBlur:()=>{o(),c(),h(w,r)},onFocus:p,type:"number",inputMode:"decimal",className:q("txt-compact-small size-full bg-transparent outline-none","placeholder:text-ui-fg-muted"),tabIndex:-1,...t,...i,...f})})},Oe=({context:e,color:n="muted",children:t})=>{const{rowErrors:s}=oe({context:e});return d.jsxs("div",{className:q("txt-compact-small text-ui-fg-subtle flex size-full cursor-not-allowed items-center justify-between overflow-hidden px-4 py-2.5 outline-none",n==="muted"&&"bg-ui-bg-subtle",n==="normal"&&"bg-ui-bg-base"),children:[d.jsx("div",{className:"flex-1 truncate",children:t}),d.jsx($t,{rowErrors:s})]})},Wr=(e=20)=>{const[n,t]=u.useState([]),[s,r]=u.useState([]),l=n.length>0,o=s.length>0,i=u.useCallback(()=>{if(!l)return;const c=n[n.length-1],p=n.slice(0,n.length-1);c.undo(),t(p),r([c,...s.slice(0,e-1)])},[l,s,n,e]),a=u.useCallback(()=>{if(!o)return;const c=s[0],p=s.slice(1);c.redo(),t([...n,c].slice(0,e-1)),r(p)},[o,s,n,e]),h=u.useCallback(c=>{c.execute(),t(p=>[...p,c].slice(0,e-1)),r([])},[e]);return{undo:i,redo:a,execute:h,canUndo:l,canRedo:o}},Vr=()=>{const{t:e}=ie();return u.useMemo(()=>[{label:e("dataGrid.shortcuts.commands.undo"),keys:{Mac:["âŒ˜","Z"],Windows:["Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.redo"),keys:{Mac:["â‡§","âŒ˜","Z"],Windows:["Shift","Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.copy"),keys:{Mac:["âŒ˜","C"],Windows:["Ctrl","C"]}},{label:e("dataGrid.shortcuts.commands.paste"),keys:{Mac:["âŒ˜","V"],Windows:["Ctrl","V"]}},{label:e("dataGrid.shortcuts.commands.edit"),keys:{Mac:["â†µ"],Windows:["Enter"]}},{label:e("dataGrid.shortcuts.commands.delete"),keys:{Mac:["âŒ«"],Windows:["Backspace"]}},{label:e("dataGrid.shortcuts.commands.clear"),keys:{Mac:["Space"],Windows:["Space"]}},{label:e("dataGrid.shortcuts.commands.moveUp"),keys:{Mac:["â†‘"],Windows:["â†‘"]}},{label:e("dataGrid.shortcuts.commands.moveDown"),keys:{Mac:["â†“"],Windows:["â†“"]}},{label:e("dataGrid.shortcuts.commands.moveLeft"),keys:{Mac:["â†"],Windows:["â†"]}},{label:e("dataGrid.shortcuts.commands.moveRight"),keys:{Mac:["â†’"],Windows:["â†’"]}},{label:e("dataGrid.shortcuts.commands.moveTop"),keys:{Mac:["âŒ˜","â†‘"],Windows:["Ctrl","â†‘"]}},{label:e("dataGrid.shortcuts.commands.moveBottom"),keys:{Mac:["âŒ˜","â†“"],Windows:["Ctrl","â†“"]}},{label:e("dataGrid.shortcuts.commands.selectDown"),keys:{Mac:["â‡§","â†“"],Windows:["Shift","â†“"]}},{label:e("dataGrid.shortcuts.commands.selectUp"),keys:{Mac:["â‡§","â†‘"],Windows:["Shift","â†‘"]}},{label:e("dataGrid.shortcuts.commands.selectColumnDown"),keys:{Mac:["â‡§","âŒ˜","â†“"],Windows:["Shift","Ctrl","â†“"]}},{label:e("dataGrid.shortcuts.commands.selectColumnUp"),keys:{Mac:["â‡§","âŒ˜","â†‘"],Windows:["Shift","Ctrl","â†‘"]}},{label:e("dataGrid.shortcuts.commands.focusToolbar"),keys:{Mac:["âŒƒ","âŒ¥",","],Windows:["Ctrl","Alt",","]}},{label:e("dataGrid.shortcuts.commands.focusCancel"),keys:{Mac:["âŒƒ","âŒ¥","."],Windows:["Ctrl","Alt","."]}}],[e])},Kr=({open:e,onOpenChange:n})=>{const{t}=ie(),[s,r]=u.useState(""),l=Vr(),o=u.useMemo(()=>l.filter(i=>i.label.toLowerCase().includes(s.toLowerCase())),[s,l]);return d.jsxs(dn,{open:e,onOpenChange:n,children:[d.jsx(hn,{asChild:!0,children:d.jsx(de,{size:"small",variant:"secondary",children:t("dataGrid.shortcuts.label")})}),d.jsxs(fn,{children:[d.jsx(mn,{className:q("bg-ui-bg-overlay fixed inset-0","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0")}),d.jsxs(pn,{className:"bg-ui-bg-subtle shadow-elevation-modal fixed left-[50%] top-[50%] flex h-full max-h-[612px] w-full max-w-[560px] translate-x-[-50%] translate-y-[-50%] flex-col divide-y overflow-hidden rounded-lg outline-none",children:[d.jsxs("div",{className:"flex flex-col gap-y-3 px-6 py-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx(gn,{asChild:!0,children:d.jsx(bn,{children:t("app.menus.user.shortcuts")})}),d.jsx(vn,{className:"sr-only"})]}),d.jsxs("div",{className:"flex items-center gap-x-2",children:[d.jsx(qe,{children:"esc"}),d.jsx(wn,{asChild:!0,children:d.jsx(xn,{variant:"transparent",size:"small",children:d.jsx(Cn,{})})})]})]}),d.jsx("div",{children:d.jsx(yn,{type:"search",value:s,autoFocus:!0,onChange:i=>r(i.target.value)})})]}),d.jsx("div",{className:"flex flex-col divide-y overflow-y-auto",children:o.map((i,a)=>{var h;return d.jsxs("div",{className:"text-ui-fg-subtle flex items-center justify-between px-6 py-3",children:[d.jsx(_n,{size:"small",children:i.label}),d.jsx("div",{className:"flex items-center gap-x-1",children:(h=i.keys.Mac)==null?void 0:h.map((c,p)=>d.jsx("div",{className:"flex items-center gap-x-1",children:d.jsx(qe,{children:c})},p))})]},a)})})]})]})]})},Lr=40,Tt=e=>{const n=e.getIsPinned(),s=document.documentElement.classList.contains("dark")?"rgb(50,50,53)":"rgb(228,228,231)";return{position:n?"sticky":"relative",width:e.getSize(),zIndex:n?1:0,borderBottom:n?`1px solid ${s}`:void 0,borderRight:n?`1px solid ${s}`:void 0,left:n==="left"?`${e.getStart("left")}px`:void 0,right:n==="right"?`${e.getAfter("right")}px`:void 0}},Hr=({data:e=[],columns:n,state:t,getSubRows:s,onEditingChange:r,disableInteractions:l,multiColumnSelection:o=!1})=>{var Qe,Xe;const i=u.useRef(null),{redo:a,undo:h,execute:c}=Wr(),{register:p,control:f,getValues:w,setValue:v,formState:{errors:m}}=t,[b,S]=u.useState(!0),C=!l&&b,[x,k]=u.useState(null),[y,O]=u.useState(null),[T,$]=u.useState(null),[P,U]=u.useState(!1),[Y,ee]=u.useState(!1),[te,ne]=u.useState(!1),[Z,H]=u.useState({}),[L,se]=u.useState({}),E=ln({data:e,columns:n,initialState:{columnPinning:{left:[n[0].id]}},state:{columnVisibility:Z},onColumnVisibilityChange:H,getSubRows:s,getCoreRowModel:on(),defaultColumn:{size:200,maxSize:400}}),{flatRows:R}=E.getRowModel(),Q=E.getAllFlatColumns(),X=u.useMemo(()=>R.filter((I,N)=>(L==null?void 0:L[N])!==!1),[R,L]),g=E.getVisibleLeafColumns(),_=ft({count:X.length,estimateSize:()=>Lr,getScrollElement:()=>i.current,overscan:5,rangeExtractor:I=>{const N=new Set(Array.from({length:I.endIndex-I.startIndex+1},(W,V)=>I.startIndex+V));return x&&X[x.row]&&N.add(x.row),y&&X[y.row]&&N.add(y.row),Array.from(N).sort((W,V)=>W-V)}}),j=_.getVirtualItems(),M=ft({count:g.length,estimateSize:I=>g[I].getSize(),getScrollElement:()=>i.current,horizontal:!0,overscan:3,rangeExtractor:I=>{const N=I.startIndex,W=I.endIndex,V=new Set(Array.from({length:W-N+1},(ae,B)=>N+B));return x&&g[x.col]&&V.add(x.col),y&&g[y.col]&&V.add(y.col),V.add(0),Array.from(V).sort((ae,B)=>ae-B)}}),D=M.getVirtualItems();let A,F;M&&(D!=null&&D.length)&&(A=((Qe=D[0])==null?void 0:Qe.start)??0,F=M.getTotalSize()-(((Xe=D[D.length-1])==null?void 0:Xe.end)??0));const z=u.useMemo(()=>new ur(R,n,o),[R,n,o]),J=zr(i),G=u.useCallback(I=>{k(I),O(I)},[]),{errorCount:Gt,isHighlighted:Wt,toggleErrorHighlighting:Re}=vr(z,E,m),Vt=u.useCallback(()=>{Re(L,Z,se,H)},[Re,L,Z]),{columnOptions:Kt,handleToggleColumn:$e,handleResetColumns:Lt,isDisabled:Ht}=gr(E,z),Bt=u.useCallback(I=>$e(I),[$e]),{navigateToField:Te,scrollToCoordinates:Ce}=Ar({matrix:z,queryTool:J,anchor:x,columnVirtualizer:M,rowVirtualizer:_,flatColumns:Q,setColumnVisibility:H,setSingleRange:G,visibleColumns:g,visibleRows:X}),{createSnapshot:ye,restoreSnapshot:Ut}=mr({matrix:z,form:t}),_e=u.useCallback(I=>{r&&r(I),I&&ye(x),ne(I)},[x,ye,r]),{getSelectionValues:Se,setSelectionValues:Ee}=wr({matrix:z,form:t,anchor:x}),{handleKeyDownEvent:Me,handleSpecialFocusKeys:Ge}=jr({containerRef:i,matrix:z,queryTool:J,anchor:x,rangeEnd:y,isEditing:te,setTrapActive:S,setRangeEnd:O,getSelectionValues:Se,getValues:w,setSelectionValues:Ee,onEditingChangeHandler:_e,restoreSnapshot:Ut,createSnapshot:ye,setSingleRange:G,scrollToCoordinates:Ce,execute:c,undo:h,redo:a,setValue:v}),{handleMouseUpEvent:ke}=Or({matrix:z,anchor:x,dragEnd:T,setDragEnd:$,isDragging:Y,setIsDragging:ee,setRangeEnd:O,setIsSelecting:U,getSelectionValues:Se,setSelectionValues:Ee,execute:c}),{handleCopyEvent:Ie,handlePasteEvent:je}=pr({matrix:z,isEditing:te,anchor:x,rangeEnd:y,getSelectionValues:Se,setSelectionValues:Ee,execute:c}),{getWrapperFocusHandler:We,getInputChangeHandler:Ve,getOverlayMouseDownHandler:Ke,getWrapperMouseOverHandler:Le,getIsCellDragSelected:He,getIsCellSelected:Be,onDragToFillStart:Yt}=hr({matrix:z,anchor:x,rangeEnd:y,setRangeEnd:O,isDragging:Y,setIsDragging:ee,isSelecting:P,setIsSelecting:U,setSingleRange:G,dragEnd:T,setDragEnd:$,setValue:v,execute:c,multiColumnSelection:o}),{getCellErrorMetadata:Ue,getCellMetadata:Ye}=fr({matrix:z});u.useEffect(()=>{if(C)return window.addEventListener("keydown",Me),window.addEventListener("mouseup",ke),window.addEventListener("copy",Ie),window.addEventListener("paste",je),()=>{window.removeEventListener("keydown",Me),window.removeEventListener("mouseup",ke),window.removeEventListener("copy",Ie),window.removeEventListener("paste",je)}},[C,Me,ke,Ie,je]),u.useEffect(()=>{const I=N=>{if(Pt(N)){Ge(N);return}};return window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)}},[Ge]);const Zt=u.useCallback(I=>{I&&S(!1)},[]);u.useEffect(()=>{x&&(y||O(x))},[x,y]),u.useEffect(()=>{if(!x&&z){const I=z.getFirstNavigableCell();I&&G(I)}},[x,z,G]);const Qt=u.useMemo(()=>({anchor:x,control:f,trapActive:C,errors:m,setTrapActive:S,setIsSelecting:U,setIsEditing:_e,setSingleRange:G,setRangeEnd:O,getWrapperFocusHandler:We,getInputChangeHandler:Ve,getOverlayMouseDownHandler:Ke,getWrapperMouseOverHandler:Le,register:p,getIsCellSelected:Be,getIsCellDragSelected:He,getCellMetadata:Ye,getCellErrorMetadata:Ue,navigateToField:Te}),[x,f,C,m,S,U,_e,G,O,We,Ve,Ke,Le,p,Be,He,Ye,Ue,Te]),Ze=u.useCallback(()=>{x&&!C&&(S(!0),G(x),Ce(x,"both"),requestAnimationFrame(()=>{var I;(I=J==null?void 0:J.getContainer(x))==null||I.focus()}))},[x,C,G,Ce,J]);return d.jsx(zt.Provider,{value:Qt,children:d.jsxs("div",{className:"bg-ui-bg-subtle flex size-full flex-col",children:[d.jsx(Br,{columnOptions:Kt,isDisabled:Ht,onToggleColumn:Bt,errorCount:Gt,onToggleErrorHighlighting:Vt,onResetColumns:Lt,isHighlighted:Wt,onHeaderInteractionChange:Zt}),d.jsx("div",{className:"size-full overflow-hidden",children:d.jsx("div",{ref:i,autoFocus:!0,tabIndex:0,className:"relative h-full select-none overflow-auto outline-none",onFocus:Ze,onClick:Ze,"data-container":!0,role:"application",children:d.jsxs("div",{role:"grid",className:"text-ui-fg-subtle grid",children:[d.jsx("div",{role:"rowgroup",className:"txt-compact-small-plus bg-ui-bg-subtle sticky top-0 z-[1] grid",children:E.getHeaderGroups().map(I=>d.jsxs("div",{role:"row",className:"flex h-10 w-full",children:[A?d.jsx("div",{role:"presentation",style:{display:"flex",width:A}}):null,D.reduce((N,W,V,ae)=>{const B=I.headers[W.index],ce=ae[V-1];return ce&&W.index!==ce.index+1&&N.push(d.jsx("div",{role:"presentation",style:{display:"flex",width:`${W.start-ce.end}px`}},`padding-${ce.index}-${W.index}`)),N.push(d.jsx("div",{role:"columnheader","data-column-index":W.index,style:{width:B.getSize(),...Tt(B.column)},className:"bg-ui-bg-base txt-compact-small-plus flex items-center border-b border-r px-4 py-2.5",children:B.isPlaceholder?null:bt(B.column.columnDef.header,B.getContext())},B.id)),N},[]),F?d.jsx("div",{role:"presentation",style:{display:"flex",width:F}}):null]},I.id))}),d.jsx("div",{role:"rowgroup",className:"relative grid",style:{height:`${_.getTotalSize()}px`},children:j.map(I=>{const N=X[I.index],W=R.findIndex(V=>V.id===N.id);return d.jsx(Yr,{row:N,rowIndex:W,virtualRow:I,flatColumns:Q,virtualColumns:D,anchor:x,virtualPaddingLeft:A,virtualPaddingRight:F,onDragToFillStart:Yt,multiColumnSelection:o},N.id)})})]})})})]})})},Br=({columnOptions:e,isDisabled:n,onToggleColumn:t,onResetColumns:s,isHighlighted:r,errorCount:l,onToggleErrorHighlighting:o,onHeaderInteractionChange:i})=>{const[a,h]=u.useState(!1),[c,p]=u.useState(!1),{t:f}=ie(),w=e.some(b=>!b.checked),v=b=>{i(b),h(b)},m=b=>{i(b),p(b)};return d.jsxs("div",{className:"bg-ui-bg-base flex items-center justify-between border-b p-4",children:[d.jsxs("div",{className:"flex items-center gap-x-2",children:[d.jsxs(ue,{open:c,onOpenChange:m,children:[d.jsx(un,{showTooltip:n,content:f("dataGrid.columns.disabled"),children:d.jsx(ue.Trigger,{asChild:!0,disabled:n,children:d.jsxs(de,{size:"small",variant:"secondary",children:[w?d.jsx(xt,{}):d.jsx(In,{}),f("dataGrid.columns.view")]})})}),d.jsx(ue.Content,{children:e.map((b,S)=>{const{checked:C,disabled:x,id:k,name:y}=b;return x?null:d.jsx(ue.CheckboxItem,{checked:C,onCheckedChange:t(S),onSelect:O=>O.preventDefault(),children:y},k)})})]}),w&&d.jsx(de,{size:"small",variant:"transparent",type:"button",onClick:s,className:"text-ui-fg-muted hover:text-ui-fg-subtle","data-id":"reset-columns",children:f("dataGrid.columns.resetToDefault")})]}),d.jsxs("div",{className:"flex items-center gap-x-2",children:[l>0&&d.jsxs(de,{size:"small",variant:"secondary",type:"button",onClick:o,className:q({"bg-ui-button-neutral-pressed":r}),children:[d.jsx(gt,{className:"text-ui-fg-subtle"}),d.jsx("span",{children:f("dataGrid.errors.count",{count:l})})]}),d.jsx(Kr,{open:a,onOpenChange:v})]})]})},Ur=({cell:e,columnIndex:n,rowIndex:t,anchor:s,onDragToFillStart:r,multiColumnSelection:l})=>{const i=Ft({row:t,col:n},s);return d.jsx("div",{role:"gridcell","aria-rowindex":t,"aria-colindex":n,style:{width:e.column.getSize(),...Tt(e.column)},"data-row-index":t,"data-column-index":n,className:q("relative flex items-center border-b border-r p-0 outline-none"),tabIndex:-1,children:d.jsxs("div",{className:"relative h-full w-full",children:[bt(e.column.columnDef.cell,{...e.getContext(),columnIndex:n,rowIndex:t}),i&&d.jsx("div",{onMouseDown:r,className:q("bg-ui-fg-interactive absolute bottom-0 right-0 z-[3] size-1.5 cursor-ns-resize",{"cursor-nwse-resize":l})})]})})},Yr=({row:e,rowIndex:n,virtualRow:t,virtualPaddingLeft:s,virtualPaddingRight:r,virtualColumns:l,flatColumns:o,anchor:i,onDragToFillStart:a,multiColumnSelection:h})=>{const c=e.getVisibleCells();return d.jsxs("div",{role:"row","aria-rowindex":t.index,style:{transform:`translateY(${t.start}px)`},className:"bg-ui-bg-subtle txt-compact-small absolute flex h-10 w-full",children:[s?d.jsx("div",{role:"presentation",style:{display:"flex",width:s}}):null,l.reduce((p,f,w,v)=>{const m=c[f.index],b=m.column,S=o.findIndex(x=>x.id===b.id),C=v[w-1];return C&&f.index!==C.index+1&&p.push(d.jsx("div",{role:"presentation",style:{display:"flex",width:`${f.start-C.end}px`}},`padding-${C.index}-${f.index}`)),p.push(d.jsx(Ur,{cell:m,columnIndex:S,rowIndex:n,anchor:i,onDragToFillStart:a,multiColumnSelection:h},m.id)),p},[]),r?d.jsx("div",{role:"presentation",style:{display:"flex",width:r}}):null]})},Zr=({context:e})=>{const{field:n,control:t,renderProps:s}=we({context:e}),r=oe({context:e}),{container:l,input:o}=s;return d.jsx(be,{control:t,name:n,render:({field:i})=>d.jsx(xe,{...l,...r,children:d.jsx(Qr,{field:i,inputProps:o})})})},Qr=({field:e,inputProps:n})=>{const{onChange:t,onBlur:s,ref:r,value:l,...o}=e,{ref:i,onBlur:a,onChange:h,...c}=n,[p,f]=u.useState(l);u.useEffect(()=>{f(l)},[l]);const w=ve(i,r);return d.jsx("input",{className:q("txt-compact-small text-ui-fg-subtle flex size-full cursor-pointer items-center justify-center bg-transparent outline-none","focus:cursor-text"),autoComplete:"off",tabIndex:-1,value:p,onChange:v=>f(v.target.value),ref:w,onBlur:()=>{s(),a(),h(p,l)},...c,...o})},Xr=({isLoading:e,...n})=>{var t;return e?d.jsx(rr,{columns:n.columns,rows:(t=n.data)!=null&&t.length&&n.data.length>0?n.data.length:10}):d.jsx(Hr,{...n})},ll=Object.assign(Xr,{BooleanCell:Pr,TextCell:Zr,NumberCell:Tr,CurrencyCell:De,ReadonlyCell:Oe});function Jr(){const e=nn();return{column:({id:n,name:t,header:s,cell:r,disableHiding:l=!1,field:o,type:i})=>e.display({id:n,header:s,cell:r,enableHiding:!l,meta:{name:t,field:o,type:i}})}}var mt=({includesTax:e})=>{const{t:n}=ie();return d.jsx(ze,{maxWidth:999,content:n(e?"general.includesTaxTooltip":"general.excludesTaxTooltip"),children:e?d.jsx(Mt,{className:"text-ui-fg-muted shrink-0"}):d.jsx(_t,{className:"text-ui-fg-muted shrink-0"})})},il=({currencies:e,regions:n,pricePreferences:t,isReadyOnly:s,getFieldName:r,t:l})=>{const o=Jr();return[...(e==null?void 0:e.map(i=>{const a=t==null?void 0:t.find(c=>c.attribute==="currency_code"&&c.value===i),h=l("fields.priceTemplate",{regionOrCurrency:i.toUpperCase()});return o.column({id:`currency_prices.${i}`,name:l("fields.priceTemplate",{regionOrCurrency:i.toUpperCase()}),field:c=>(s==null?void 0:s(c))?null:r(c,i),type:"number",header:()=>d.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[d.jsx("span",{className:"truncate",title:h,children:h}),d.jsx(mt,{includesTax:a==null?void 0:a.is_tax_inclusive})]}),cell:c=>s!=null&&s(c)?d.jsx(Oe,{context:c}):d.jsx(De,{code:i,context:c})})}))??[],...(n==null?void 0:n.map(i=>{const a=t==null?void 0:t.find(c=>c.attribute==="region_id"&&c.value===i.id),h=l("fields.priceTemplate",{regionOrCurrency:i.name});return o.column({id:`region_prices.${i.id}`,name:l("fields.priceTemplate",{regionOrCurrency:i.name}),field:c=>(s==null?void 0:s(c))?null:r(c,i.id),type:"number",header:()=>d.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[d.jsx("span",{className:"truncate",title:h,children:h}),d.jsx(mt,{includesTax:a==null?void 0:a.is_tax_inclusive})]}),cell:c=>s!=null&&s(c)?d.jsx(Oe,{context:c}):(e==null?void 0:e.find(f=>f===i.currency_code))?d.jsx(De,{code:i.currency_code,context:c}):null})}))??[]]};export{ll as D,mt as I,il as a,rr as b,Jr as c,Oe as d,we as e,oe as f,xe as g,ve as h,rl as u};
